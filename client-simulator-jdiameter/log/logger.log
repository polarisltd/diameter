[17:45:20.869] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[17:45:21.169] INFO  - Initiating stack
[17:45:21.172] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[17:45:21.409] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[17:45:21.410] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[17:45:21.410] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[17:45:21.411] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[17:45:21.411] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[17:45:21.446] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[17:45:21.446] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[17:45:21.448] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[17:45:21.448] DEBUG - Going to loop through configured realms and add them into a network map
[17:45:21.449] DEBUG - Getting config for realm [emblacom.com]
[17:45:21.449] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[17:45:21.449] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[17:45:21.459] DEBUG - Initializing Peer Table.
[17:45:21.459] DEBUG - Populating peerTable from configuration
[17:45:21.481] DEBUG - Maximum FSM Queue size is [10000]
[17:45:21.487] DEBUG - Initializing QueueStat @ Thread[main]
[17:45:21.487] DEBUG - Finished Initializing QueueStat @ Thread[main]
[17:45:21.489] DEBUG - Starting FSM Thread 1 of 3
[17:45:21.490] DEBUG - Starting FSM Thread 2 of 3
[17:45:21.490] DEBUG - Starting FSM Thread 3 of 3
[17:45:21.491] DEBUG - Starting ... [1] FSM threads are running
[17:45:21.491] DEBUG - Starting ... [2] FSM threads are running
[17:45:21.491] DEBUG - Starting ... [3] FSM threads are running
[17:45:21.516] DEBUG - Destination address is set to [testblade04] : [3868]
[17:45:21.517] DEBUG - Origin address is set to [0.0.0.0] : [0]
[17:45:21.518] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@13ffd111}] to peer table
[17:45:21.518] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[17:45:21.521] INFO  - Starting stack
[17:45:21.551] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[17:45:21.552] DEBUG - Handling event with type [START_EVENT]
[17:45:21.552] DEBUG - Not performing validation to message since validator is DISABLED.
[17:45:21.552] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[17:45:21.552] DEBUG - Calling start on the router
[17:45:21.553] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[17:45:21.553] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[17:45:21.564] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[17:45:21.578] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[17:45:21.578] DEBUG - Got lock
[17:45:21.578] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[17:45:21.579] DEBUG - Passing event to listener. Event type is [CONNECTED]
[17:45:21.580] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[17:45:21.580] DEBUG - Handling event with type [CONNECT_EVENT]
[17:45:21.580] DEBUG - Not performing validation to message since validator is DISABLED.
[17:45:21.580] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[17:45:21.581] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[17:45:21.581] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[17:45:21.581] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[17:45:21.581] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]
[17:45:21.581] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[17:45:21.582] DEBUG - Connected to peer aaa://172.16.133.122:3868
[17:45:21.582] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[17:45:21.582] DEBUG - Send CER message
[17:45:21.593] DEBUG - In getCommonApplications appIds size is [0]
[17:45:21.594] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[17:45:21.594] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[17:45:21.594] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[17:45:21.595] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:21.597] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:21.597] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[17:45:21.598] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[17:45:21.832] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[17:45:21.832] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:21.861] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:21.862] DEBUG - No data received ?
[17:45:21.862] DEBUG - Passing message on to parent
[17:45:21.862] DEBUG - Received message of size [276]
[17:45:21.862] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[17:45:21.862] DEBUG - Got lock
[17:45:21.862] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[17:45:21.863] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[17:45:21.863] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[17:45:21.863] DEBUG - Handling event with type [CEA_EVENT]
[17:45:21.863] DEBUG - Not performing validation to message since validator is DISABLED.
[17:45:21.864] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[17:45:21.864] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[17:45:21.864] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[17:45:21.864] DEBUG - Finished passing message on to parent
[17:45:21.864] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[17:45:21.865] DEBUG - In getCommonApplications appIds size is [1]
[17:45:21.866] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[17:45:21.867] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[17:45:21.867] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[17:45:21.872] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[17:45:21.874] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[17:45:21.879] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@406637fa)
[17:45:21.881] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[17:45:21.881] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[17:45:21.884] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[17:45:21.884] INFO  - Parsing: scn/mms/msg/mms.msg
[17:45:22.948] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2336153914; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Fri Jun 28 17:45:22 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }Address-Type:1; Address-Data:358468890665; Addressee-Type:1; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:84276; Submission-Time:Fri Jun 28 17:45:22 EEST 2013; Message-Type:1; }}}}
[17:45:22.958] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[17:45:22.958] DEBUG - In getSingleApplicationId for application id [4]
[17:45:22.958] DEBUG - Application Ids in this message are:
[17:45:22.958] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[17:45:22.959] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[17:45:22.959] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[17:45:22.959] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[17:45:22.959] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[17:45:22.959] DEBUG - In getSingleApplicationId for application id [4]
[17:45:22.960] DEBUG - Application Ids in this message are:
[17:45:22.960] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[17:45:22.960] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[17:45:22.960] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[17:45:22.960] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[17:45:22.960] DEBUG - Looping through peers in realm [emblacom.com]
[17:45:22.960] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[17:45:22.961] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[17:45:22.961] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@13ffd111}] for name [172.16.133.122]
[17:45:22.961] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[17:45:22.961] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@13ffd111}]] from list [[172.16.133.122]]
[17:45:22.961] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[17:45:22.962] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@13ffd111}] for sending message [MessageImpl{commandCode=272, flags=128}]
[17:45:22.962] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@13ffd111}]
[17:45:22.962] DEBUG - Handling event with type [SEND_MSG_EVENT]
[17:45:22.962] DEBUG - Not performing validation to message since validator is DISABLED.
[17:45:22.962] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[17:45:22.962] DEBUG - Message was submitted to be sent, now adding statistics
[17:45:22.963] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[17:45:22.963] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[17:45:22.963] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[17:45:22.964] DEBUG - About to send a byte buffer of size [716] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:22.965] DEBUG - Sent a byte buffer of size [716] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:22.965] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[17:45:38.964] INFO  - Answer received: NULL
[17:45:38.965] INFO  - Scenario executed in 17.097 s
[17:45:38.965] INFO  - Stopping stack
[17:45:38.965] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[17:45:38.966] DEBUG - In stopping. Going to disconnect all peers in peer table
[17:45:38.966] DEBUG - Handling event with type [STOP_EVENT]
[17:45:38.967] DEBUG - Not performing validation to message since validator is DISABLED.
[17:45:38.967] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[17:45:38.967] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[17:45:38.967] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[17:45:38.967] DEBUG - Send DPR message with Disconnect-Cause [0]
[17:45:38.968] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[17:45:38.968] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:38.968] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:38.968] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[17:45:38.969] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[17:45:38.969] DEBUG - Calling stopped() on PeerTableImpl
[17:45:38.969] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[17:45:38.974] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:38.974] DEBUG - No data received ?
[17:45:38.974] DEBUG - Passing message on to parent
[17:45:38.974] DEBUG - Received message of size [84]
[17:45:38.974] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[17:45:38.974] DEBUG - Got lock
[17:45:38.974] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[17:45:38.975] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[17:45:38.975] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[17:45:38.975] DEBUG - Handling event with type [DPA_EVENT]
[17:45:38.975] DEBUG - Not performing validation to message since validator is DISABLED.
[17:45:38.975] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[17:45:38.975] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[17:45:38.975] DEBUG - Finished passing message on to parent
[17:45:38.975] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:38.975] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[17:45:38.976] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[17:45:38.976] DEBUG - In disconnect for [aaa://testblade04:3868]
[17:45:38.976] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:38.976] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[17:45:38.976] DEBUG - Got lock
[17:45:38.976] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[17:45:38.976] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[17:45:38.976] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[17:45:38.977] DEBUG - Handling event with type [DISCONNECT_EVENT]
[17:45:38.977] DEBUG - Not performing validation to message since validator is DISABLED.
[17:45:38.977] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[17:45:38.977] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[17:45:38.977] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:38.977] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[17:45:38.977] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[17:45:38.977] DEBUG - In disconnect for [aaa://testblade04:3868]
[17:45:38.978] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:38.978] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:38.978] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52603]]
[17:45:38.978] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[17:45:38.978] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[17:45:38.978] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[17:45:38.978] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[17:45:38.978] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[17:45:38.979] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[17:45:38.979] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[17:45:38.979] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[17:45:38.979] DEBUG - Stopping ... [2] FSM threads are running
[17:45:39.071] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[17:45:39.071] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[17:45:39.071] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[17:45:39.071] DEBUG - Stopping ... [1] FSM threads are running
[17:45:39.079] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[17:45:39.079] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[17:45:39.079] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[17:45:39.079] DEBUG - Stopping ... [0] FSM threads are running
[17:45:39.220] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[17:45:39.221] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[17:45:39.221] INFO  - Destroying stack
[17:45:39.221] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[17:45:39.221] DEBUG - Calling destroy on router
[17:47:43.086] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[17:47:43.377] INFO  - Initiating stack
[17:47:43.380] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[17:47:43.621] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[17:47:43.622] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[17:47:43.622] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[17:47:43.623] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[17:47:43.623] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[17:47:43.659] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[17:47:43.659] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[17:47:43.662] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[17:47:43.662] DEBUG - Going to loop through configured realms and add them into a network map
[17:47:43.662] DEBUG - Getting config for realm [emblacom.com]
[17:47:43.662] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[17:47:43.663] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[17:47:43.673] DEBUG - Initializing Peer Table.
[17:47:43.673] DEBUG - Populating peerTable from configuration
[17:47:43.698] DEBUG - Maximum FSM Queue size is [10000]
[17:47:43.702] DEBUG - Initializing QueueStat @ Thread[main]
[17:47:43.703] DEBUG - Finished Initializing QueueStat @ Thread[main]
[17:47:43.704] DEBUG - Starting FSM Thread 1 of 3
[17:47:43.705] DEBUG - Starting FSM Thread 2 of 3
[17:47:43.705] DEBUG - Starting ... [1] FSM threads are running
[17:47:43.705] DEBUG - Starting FSM Thread 3 of 3
[17:47:43.705] DEBUG - Starting ... [2] FSM threads are running
[17:47:43.706] DEBUG - Starting ... [3] FSM threads are running
[17:47:43.730] DEBUG - Destination address is set to [testblade04] : [3868]
[17:47:43.730] DEBUG - Origin address is set to [0.0.0.0] : [0]
[17:47:43.731] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@13ffd111}] to peer table
[17:47:43.731] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[17:47:43.732] INFO  - Starting stack
[17:47:43.756] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[17:47:43.756] DEBUG - Handling event with type [START_EVENT]
[17:47:43.756] DEBUG - Not performing validation to message since validator is DISABLED.
[17:47:43.757] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[17:47:43.757] DEBUG - Calling start on the router
[17:47:43.757] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[17:47:43.757] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[17:47:43.767] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[17:47:43.780] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[17:47:43.780] DEBUG - Got lock
[17:47:43.780] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[17:47:43.781] DEBUG - Passing event to listener. Event type is [CONNECTED]
[17:47:43.782] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[17:47:43.782] DEBUG - Handling event with type [CONNECT_EVENT]
[17:47:43.782] DEBUG - Not performing validation to message since validator is DISABLED.
[17:47:43.782] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[17:47:43.782] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[17:47:43.782] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[17:47:43.783] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[17:47:43.783] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]
[17:47:43.783] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[17:47:43.783] DEBUG - Connected to peer aaa://172.16.133.122:3868
[17:47:43.783] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[17:47:43.784] DEBUG - Send CER message
[17:47:43.794] DEBUG - In getCommonApplications appIds size is [0]
[17:47:43.794] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[17:47:43.794] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[17:47:43.795] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[17:47:43.796] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:47:43.797] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:47:43.797] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[17:47:43.797] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[17:47:44.034] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[17:47:44.034] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:47:44.064] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:47:44.065] DEBUG - No data received ?
[17:47:44.065] DEBUG - Passing message on to parent
[17:47:44.065] DEBUG - Received message of size [276]
[17:47:44.065] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[17:47:44.065] DEBUG - Got lock
[17:47:44.065] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[17:47:44.065] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[17:47:44.066] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[17:47:44.066] DEBUG - Handling event with type [CEA_EVENT]
[17:47:44.066] DEBUG - Not performing validation to message since validator is DISABLED.
[17:47:44.066] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[17:47:44.067] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[17:47:44.067] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[17:47:44.067] DEBUG - Finished passing message on to parent
[17:47:44.067] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[17:47:44.068] DEBUG - In getCommonApplications appIds size is [1]
[17:47:44.068] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[17:47:44.069] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[17:47:44.071] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[17:47:44.076] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[17:47:44.078] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[17:47:44.083] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@406637fa)
[17:47:44.085] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[17:47:44.085] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[17:47:44.089] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[17:47:44.089] INFO  - Parsing: scn/mms/msg/mms.msg
[17:47:45.311] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2336296127; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Fri Jun 28 17:47:44 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }Address-Type:1; Address-Data:358468890665; Addressee-Type:1; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:84276; Submission-Time:Fri Jun 28 17:47:45 EEST 2013; Message-Type:1; }}}}
[17:47:45.323] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[17:47:45.323] DEBUG - In getSingleApplicationId for application id [4]
[17:47:45.324] DEBUG - Application Ids in this message are:
[17:47:45.324] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[17:47:45.324] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[17:47:45.324] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[17:47:45.325] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[17:47:45.325] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[17:47:45.325] DEBUG - In getSingleApplicationId for application id [4]
[17:47:45.325] DEBUG - Application Ids in this message are:
[17:47:45.325] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[17:47:45.325] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[17:47:45.325] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[17:47:45.326] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[17:47:45.326] DEBUG - Looping through peers in realm [emblacom.com]
[17:47:45.326] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[17:47:45.326] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[17:47:45.326] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@13ffd111}] for name [172.16.133.122]
[17:47:45.327] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[17:47:45.327] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@13ffd111}]] from list [[172.16.133.122]]
[17:47:45.327] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[17:47:45.327] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@13ffd111}] for sending message [MessageImpl{commandCode=272, flags=128}]
[17:47:45.327] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@13ffd111}]
[17:47:45.328] DEBUG - Handling event with type [SEND_MSG_EVENT]
[17:47:45.328] DEBUG - Not performing validation to message since validator is DISABLED.
[17:47:45.328] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[17:47:45.328] DEBUG - Message was submitted to be sent, now adding statistics
[17:47:45.329] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[17:47:45.330] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[17:47:45.330] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[17:47:45.331] DEBUG - About to send a byte buffer of size [716] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:47:45.332] DEBUG - Sent a byte buffer of size [716] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:47:45.332] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[17:48:01.329] INFO  - Answer received: NULL
[17:48:01.330] INFO  - Scenario executed in 17.258 s
[17:48:01.330] INFO  - Stopping stack
[17:48:01.330] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[17:48:01.331] DEBUG - In stopping. Going to disconnect all peers in peer table
[17:48:01.331] DEBUG - Handling event with type [STOP_EVENT]
[17:48:01.332] DEBUG - Not performing validation to message since validator is DISABLED.
[17:48:01.332] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[17:48:01.332] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[17:48:01.332] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[17:48:01.332] DEBUG - Send DPR message with Disconnect-Cause [0]
[17:48:01.333] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[17:48:01.333] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:48:01.333] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:48:01.333] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[17:48:01.334] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[17:48:01.334] DEBUG - Calling stopped() on PeerTableImpl
[17:48:01.334] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[17:48:01.335] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:48:01.335] DEBUG - No data received ?
[17:48:01.336] DEBUG - Passing message on to parent
[17:48:01.336] DEBUG - Received message of size [84]
[17:48:01.336] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[17:48:01.336] DEBUG - Got lock
[17:48:01.336] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[17:48:01.336] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[17:48:01.337] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[17:48:01.337] DEBUG - Handling event with type [DPA_EVENT]
[17:48:01.337] DEBUG - Not performing validation to message since validator is DISABLED.
[17:48:01.337] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[17:48:01.337] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[17:48:01.337] DEBUG - Finished passing message on to parent
[17:48:01.337] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[17:48:01.337] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:48:01.337] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[17:48:01.338] DEBUG - In disconnect for [aaa://testblade04:3868]
[17:48:01.338] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:48:01.338] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[17:48:01.338] DEBUG - Got lock
[17:48:01.338] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[17:48:01.339] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[17:48:01.339] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[17:48:01.339] DEBUG - Handling event with type [DISCONNECT_EVENT]
[17:48:01.339] DEBUG - Not performing validation to message since validator is DISABLED.
[17:48:01.339] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[17:48:01.339] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[17:48:01.339] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[17:48:01.339] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:48:01.339] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[17:48:01.340] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:48:01.340] DEBUG - In disconnect for [aaa://testblade04:3868]
[17:48:01.340] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[17:48:01.340] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:48:01.340] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[17:48:01.340] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52636]]
[17:48:01.340] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[17:48:01.340] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[17:48:01.341] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[17:48:01.341] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[17:48:01.341] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[17:48:01.341] DEBUG - Stopping ... [2] FSM threads are running
[17:48:01.341] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[17:48:01.342] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[17:48:01.343] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[17:48:01.343] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[17:48:01.343] DEBUG - Stopping ... [1] FSM threads are running
[17:48:01.435] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[17:48:01.435] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[17:48:01.435] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[17:48:01.435] DEBUG - Stopping ... [0] FSM threads are running
[17:48:01.584] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[17:48:01.585] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[17:48:01.585] INFO  - Destroying stack
[17:48:01.586] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[17:48:01.586] DEBUG - Calling destroy on router
[10:00:18.219] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[10:00:18.615] INFO  - Initiating stack
[10:00:18.618] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:00:18.876] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[10:00:18.877] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[10:00:18.878] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[10:00:18.878] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[10:00:18.878] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[10:00:18.929] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[10:00:18.930] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[10:00:18.932] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[10:00:18.932] DEBUG - Going to loop through configured realms and add them into a network map
[10:00:18.932] DEBUG - Getting config for realm [emblacom.com]
[10:00:18.933] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[10:00:18.933] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[10:00:18.944] DEBUG - Initializing Peer Table.
[10:00:18.944] DEBUG - Populating peerTable from configuration
[10:00:18.972] DEBUG - Maximum FSM Queue size is [10000]
[10:00:18.978] DEBUG - Initializing QueueStat @ Thread[main]
[10:00:18.978] DEBUG - Finished Initializing QueueStat @ Thread[main]
[10:00:18.980] DEBUG - Starting FSM Thread 1 of 3
[10:00:18.980] DEBUG - Starting FSM Thread 2 of 3
[10:00:18.981] DEBUG - Starting ... [1] FSM threads are running
[10:00:18.981] DEBUG - Starting FSM Thread 3 of 3
[10:00:18.981] DEBUG - Starting ... [2] FSM threads are running
[10:00:18.982] DEBUG - Starting ... [3] FSM threads are running
[10:00:19.017] DEBUG - Destination address is set to [testblade04] : [3868]
[10:00:19.018] DEBUG - Origin address is set to [0.0.0.0] : [0]
[10:00:19.019] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] to peer table
[10:00:19.019] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:00:19.020] INFO  - Starting stack
[10:00:19.046] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[10:00:19.046] DEBUG - Handling event with type [START_EVENT]
[10:00:19.046] DEBUG - Not performing validation to message since validator is DISABLED.
[10:00:19.046] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:00:19.047] DEBUG - Calling start on the router
[10:00:19.047] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[10:00:19.047] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[10:00:19.057] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[10:00:19.079] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:00:19.080] DEBUG - Got lock
[10:00:19.080] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:00:19.080] DEBUG - Passing event to listener. Event type is [CONNECTED]
[10:00:19.081] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[10:00:19.082] DEBUG - Handling event with type [CONNECT_EVENT]
[10:00:19.082] DEBUG - Not performing validation to message since validator is DISABLED.
[10:00:19.082] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:00:19.082] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:00:19.082] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:00:19.082] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]
[10:00:19.082] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[10:00:19.083] DEBUG - Connected to peer aaa://172.16.133.122:3868
[10:00:19.083] DEBUG - Send CER message
[10:00:19.083] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[10:00:19.083] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[10:00:19.094] DEBUG - In getCommonApplications appIds size is [0]
[10:00:19.094] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[10:00:19.095] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[10:00:19.095] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:00:19.096] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:19.098] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:19.098] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:00:19.099] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[10:00:19.333] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[10:00:19.333] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:19.384] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:19.384] DEBUG - No data received ?
[10:00:19.384] DEBUG - Passing message on to parent
[10:00:19.384] DEBUG - Received message of size [276]
[10:00:19.385] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:00:19.385] DEBUG - Got lock
[10:00:19.385] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:00:19.385] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:00:19.386] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[10:00:19.386] DEBUG - Handling event with type [CEA_EVENT]
[10:00:19.386] DEBUG - Not performing validation to message since validator is DISABLED.
[10:00:19.386] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:00:19.387] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:00:19.387] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[10:00:19.387] DEBUG - Finished passing message on to parent
[10:00:19.387] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[10:00:19.388] DEBUG - In getCommonApplications appIds size is [1]
[10:00:19.389] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:00:19.389] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[10:00:19.389] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[10:00:19.399] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[10:00:19.403] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[10:00:19.409] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@5c79cc94)
[10:00:19.411] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[10:00:19.411] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[10:00:19.416] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[10:00:19.417] INFO  - Parsing: scn/mms/msg/mms.msg
[10:00:20.579] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2567451376; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 10:00:20 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }Address-Type:1; Address-Data:358468890665; Addressee-Type:1; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:84276; Submission-Time:Mon Jul 01 10:00:20 EEST 2013; Message-Type:1; }}}}
[10:00:20.592] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[10:00:20.593] DEBUG - In getSingleApplicationId for application id [4]
[10:00:20.593] DEBUG - Application Ids in this message are:
[10:00:20.593] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:00:20.594] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:00:20.594] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:00:20.594] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[10:00:20.594] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[10:00:20.594] DEBUG - In getSingleApplicationId for application id [4]
[10:00:20.594] DEBUG - Application Ids in this message are:
[10:00:20.594] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:00:20.594] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:00:20.595] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:00:20.595] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[10:00:20.595] DEBUG - Looping through peers in realm [emblacom.com]
[10:00:20.595] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[10:00:20.595] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[10:00:20.595] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] for name [172.16.133.122]
[10:00:20.595] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[10:00:20.596] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}]] from list [[172.16.133.122]]
[10:00:20.596] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[10:00:20.596] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] for sending message [MessageImpl{commandCode=272, flags=128}]
[10:00:20.596] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}]
[10:00:20.596] DEBUG - Handling event with type [SEND_MSG_EVENT]
[10:00:20.597] DEBUG - Not performing validation to message since validator is DISABLED.
[10:00:20.597] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[10:00:20.597] DEBUG - Message was submitted to be sent, now adding statistics
[10:00:20.597] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[10:00:20.597] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[10:00:20.598] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:00:20.599] DEBUG - About to send a byte buffer of size [716] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:20.599] DEBUG - Sent a byte buffer of size [716] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:20.599] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:00:20.710] DEBUG - Just read [616] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:20.710] DEBUG - No data received ?
[10:00:20.710] DEBUG - Passing message on to parent
[10:00:20.710] DEBUG - Received message of size [616]
[10:00:20.711] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:00:20.711] DEBUG - Got lock
[10:00:20.711] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:00:20.711] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:00:20.711] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[10:00:20.711] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[10:00:20.711] DEBUG - Not performing validation to message since validator is DISABLED.
[10:00:20.711] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:00:20.712] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:00:20.712] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[10:00:20.712] DEBUG - Finished passing message on to parent
[10:00:20.712] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[10:00:20.712] DEBUG - Receiving message in client.
[10:00:20.712] DEBUG - Message is an answer
[10:00:20.713] INFO  - Answer received: NULL
[10:00:20.714] INFO  - Scenario executed in 1.323 s
[10:00:20.714] INFO  - Stopping stack
[10:00:20.715] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:00:20.716] DEBUG - In stopping. Going to disconnect all peers in peer table
[10:00:20.716] DEBUG - Handling event with type [STOP_EVENT]
[10:00:20.716] DEBUG - Not performing validation to message since validator is DISABLED.
[10:00:20.716] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[10:00:20.716] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[10:00:20.716] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[10:00:20.716] DEBUG - Send DPR message with Disconnect-Cause [0]
[10:00:20.717] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:00:20.717] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:20.718] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:20.718] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:00:20.718] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[10:00:20.718] DEBUG - Calling stopped() on PeerTableImpl
[10:00:20.719] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[10:00:20.719] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:20.719] DEBUG - No data received ?
[10:00:20.720] DEBUG - Passing message on to parent
[10:00:20.720] DEBUG - Received message of size [84]
[10:00:20.720] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:00:20.720] DEBUG - Got lock
[10:00:20.720] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:00:20.720] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:00:20.720] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[10:00:20.721] DEBUG - Handling event with type [DPA_EVENT]
[10:00:20.721] DEBUG - Not performing validation to message since validator is DISABLED.
[10:00:20.721] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:00:20.721] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:00:20.721] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[10:00:20.721] DEBUG - Finished passing message on to parent
[10:00:20.721] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[10:00:20.722] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:20.722] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:00:20.722] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:20.723] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:00:20.723] DEBUG - Got lock
[10:00:20.723] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:00:20.723] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[10:00:20.723] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[10:00:20.723] DEBUG - Handling event with type [DISCONNECT_EVENT]
[10:00:20.723] DEBUG - Not performing validation to message since validator is DISABLED.
[10:00:20.724] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:00:20.724] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:00:20.724] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:20.724] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:00:20.724] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[10:00:20.725] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:00:20.725] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:20.725] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:20.725] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:00:20.726] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54561]]
[10:00:20.726] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:00:20.726] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[10:00:20.726] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:00:20.727] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:00:20.727] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[10:00:20.727] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:00:20.727] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:00:20.727] DEBUG - Stopping ... [2] FSM threads are running
[10:00:20.819] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[10:00:20.819] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:00:20.819] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:00:20.819] DEBUG - Stopping ... [1] FSM threads are running
[10:00:20.826] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[10:00:20.826] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:00:20.826] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:00:20.826] DEBUG - Stopping ... [0] FSM threads are running
[10:00:20.969] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[10:00:20.970] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:00:20.970] INFO  - Destroying stack
[10:00:20.970] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[10:00:20.970] DEBUG - Calling destroy on router
[10:33:26.590] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[10:33:26.977] INFO  - Initiating stack
[10:33:26.980] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:33:27.238] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[10:33:27.239] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[10:33:27.239] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[10:33:27.239] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[10:33:27.239] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[10:33:27.287] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[10:33:27.287] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[10:33:27.289] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[10:33:27.290] DEBUG - Going to loop through configured realms and add them into a network map
[10:33:27.290] DEBUG - Getting config for realm [emblacom.com]
[10:33:27.290] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[10:33:27.291] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[10:33:27.300] DEBUG - Initializing Peer Table.
[10:33:27.301] DEBUG - Populating peerTable from configuration
[10:33:27.327] DEBUG - Maximum FSM Queue size is [10000]
[10:33:27.331] DEBUG - Initializing QueueStat @ Thread[main]
[10:33:27.331] DEBUG - Finished Initializing QueueStat @ Thread[main]
[10:33:27.333] DEBUG - Starting FSM Thread 1 of 3
[10:33:27.334] DEBUG - Starting FSM Thread 2 of 3
[10:33:27.334] DEBUG - Starting ... [1] FSM threads are running
[10:33:27.334] DEBUG - Starting FSM Thread 3 of 3
[10:33:27.335] DEBUG - Starting ... [2] FSM threads are running
[10:33:27.335] DEBUG - Starting ... [3] FSM threads are running
[10:33:27.388] DEBUG - Destination address is set to [testblade04] : [3868]
[10:33:27.388] DEBUG - Origin address is set to [0.0.0.0] : [0]
[10:33:27.389] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] to peer table
[10:33:27.389] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:33:27.390] INFO  - Starting stack
[10:33:27.410] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[10:33:27.411] DEBUG - Handling event with type [START_EVENT]
[10:33:27.411] DEBUG - Not performing validation to message since validator is DISABLED.
[10:33:27.411] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:33:27.411] DEBUG - Calling start on the router
[10:33:27.411] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[10:33:27.412] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[10:33:27.421] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[10:33:27.443] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:33:27.443] DEBUG - Got lock
[10:33:27.443] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:33:27.443] DEBUG - Passing event to listener. Event type is [CONNECTED]
[10:33:27.444] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[10:33:27.444] DEBUG - Handling event with type [CONNECT_EVENT]
[10:33:27.444] DEBUG - Not performing validation to message since validator is DISABLED.
[10:33:27.444] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:33:27.445] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:33:27.445] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:33:27.445] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]
[10:33:27.445] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[10:33:27.445] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[10:33:27.445] DEBUG - Connected to peer aaa://172.16.133.122:3868
[10:33:27.445] DEBUG - Send CER message
[10:33:27.445] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[10:33:27.455] DEBUG - In getCommonApplications appIds size is [0]
[10:33:27.456] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[10:33:27.456] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[10:33:27.456] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:33:27.457] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]]
[10:33:27.459] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]]
[10:33:27.460] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:33:27.460] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[10:33:27.696] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[10:33:27.696] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]]
[10:33:27.750] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]]
[10:33:27.750] DEBUG - No data received ?
[10:33:27.750] DEBUG - Passing message on to parent
[10:33:27.750] DEBUG - Received message of size [276]
[10:33:27.750] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:33:27.750] DEBUG - Got lock
[10:33:27.751] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:33:27.751] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:33:27.751] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[10:33:27.752] DEBUG - Handling event with type [CEA_EVENT]
[10:33:27.752] DEBUG - Not performing validation to message since validator is DISABLED.
[10:33:27.752] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:33:27.752] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:33:27.752] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[10:33:27.753] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[10:33:27.752] DEBUG - Finished passing message on to parent
[10:33:27.757] DEBUG - In getCommonApplications appIds size is [1]
[10:33:27.761] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:33:27.761] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[10:33:27.762] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[10:33:27.770] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[10:33:27.774] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[10:33:27.780] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@5c79cc94)
[10:33:27.781] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[10:33:27.782] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[10:33:27.787] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[10:33:27.788] INFO  - Parsing: scn/mms/msg/mms.msg
[10:33:28.742] ERROR - 
java.lang.NumberFormatException: For input string: "10415 ; 0=No, 1=Yes"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Integer.parseInt(Integer.java:492)
	at java.lang.Integer.parseInt(Integer.java:527)
	at pl.p4.diameter.avp.AvpInfo.getVendorCode(AvpInfo.java:50)
	at pl.p4.diameter.msg.MessageHelper.addAvps(MessageHelper.java:211)
	at pl.p4.diameter.msg.MessageHelper.addAvps(MessageHelper.java:226)
	at pl.p4.diameter.msg.MessageHelper.addAvps(MessageHelper.java:226)
	at pl.p4.diameter.msg.MessageHelper.createRequestFromXML(MessageHelper.java:136)
	at pl.p4.diameter.msg.MessageHelper.createMessageFromXML(MessageHelper.java:102)
	at pl.p4.diameter.msg.MessageHelper.sendMessage(MessageHelper.java:44)
	at pl.p4.diameter.scn.Message.run(Message.java:39)
	at pl.p4.diameter.scn.Scenario.run(Scenario.java:84)
	at pl.p4.diameter.client.jDiamClient.main(jDiamClient.java:152)
[10:33:28.750] INFO  - Stopping stack
[10:33:28.750] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:33:28.753] DEBUG - In stopping. Going to disconnect all peers in peer table
[10:33:28.754] DEBUG - Handling event with type [STOP_EVENT]
[10:33:28.754] DEBUG - Not performing validation to message since validator is DISABLED.
[10:33:28.754] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[10:33:28.754] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[10:33:28.755] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[10:33:28.755] DEBUG - Send DPR message with Disconnect-Cause [0]
[10:33:28.755] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:33:28.755] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]]
[10:33:28.756] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]]
[10:33:28.756] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:33:28.757] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[10:33:28.757] DEBUG - Calling stopped() on PeerTableImpl
[10:33:28.757] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[10:33:28.758] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]]
[10:33:28.758] DEBUG - No data received ?
[10:33:28.758] DEBUG - Passing message on to parent
[10:33:28.758] DEBUG - Received message of size [84]
[10:33:28.758] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:33:28.758] DEBUG - Got lock
[10:33:28.758] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:33:28.759] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:33:28.759] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[10:33:28.759] DEBUG - Handling event with type [DPA_EVENT]
[10:33:28.759] DEBUG - Not performing validation to message since validator is DISABLED.
[10:33:28.759] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:33:28.759] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:33:28.759] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[10:33:28.759] DEBUG - Finished passing message on to parent
[10:33:28.760] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]]
[10:33:28.760] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[10:33:28.760] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:33:28.760] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]]
[10:33:28.761] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:33:28.761] DEBUG - Got lock
[10:33:28.761] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:33:28.761] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[10:33:28.762] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[10:33:28.762] DEBUG - Handling event with type [DISCONNECT_EVENT]
[10:33:28.762] DEBUG - Not performing validation to message since validator is DISABLED.
[10:33:28.762] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:33:28.762] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:33:28.762] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:33:28.762] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]]
[10:33:28.762] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[10:33:28.763] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:33:28.763] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]]
[10:33:28.763] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]]
[10:33:28.763] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54699]]
[10:33:28.763] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:33:28.763] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:33:28.763] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[10:33:28.764] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:33:28.764] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:33:28.764] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[10:33:28.764] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:33:28.764] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:33:28.765] DEBUG - Stopping ... [2] FSM threads are running
[10:33:28.858] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[10:33:28.858] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:33:28.858] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:33:28.858] DEBUG - Stopping ... [1] FSM threads are running
[10:33:28.865] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[10:33:28.865] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:33:28.866] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:33:28.866] DEBUG - Stopping ... [0] FSM threads are running
[10:33:29.007] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[10:33:29.008] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:33:29.009] INFO  - Destroying stack
[10:33:29.009] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[10:33:29.009] DEBUG - Calling destroy on router
[10:34:24.704] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[10:34:24.944] INFO  - Initiating stack
[10:34:24.947] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:34:25.175] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[10:34:25.175] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[10:34:25.176] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[10:34:25.176] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[10:34:25.176] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[10:34:25.209] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[10:34:25.209] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[10:34:25.211] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[10:34:25.212] DEBUG - Going to loop through configured realms and add them into a network map
[10:34:25.212] DEBUG - Getting config for realm [emblacom.com]
[10:34:25.212] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[10:34:25.213] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[10:34:25.221] DEBUG - Initializing Peer Table.
[10:34:25.222] DEBUG - Populating peerTable from configuration
[10:34:25.243] DEBUG - Maximum FSM Queue size is [10000]
[10:34:25.247] DEBUG - Initializing QueueStat @ Thread[main]
[10:34:25.248] DEBUG - Finished Initializing QueueStat @ Thread[main]
[10:34:25.249] DEBUG - Starting FSM Thread 1 of 3
[10:34:25.250] DEBUG - Starting FSM Thread 2 of 3
[10:34:25.250] DEBUG - Starting ... [1] FSM threads are running
[10:34:25.250] DEBUG - Starting FSM Thread 3 of 3
[10:34:25.251] DEBUG - Starting ... [2] FSM threads are running
[10:34:25.251] DEBUG - Starting ... [3] FSM threads are running
[10:34:25.274] DEBUG - Destination address is set to [testblade04] : [3868]
[10:34:25.275] DEBUG - Origin address is set to [0.0.0.0] : [0]
[10:34:25.276] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] to peer table
[10:34:25.276] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:34:25.277] INFO  - Starting stack
[10:34:25.299] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[10:34:25.299] DEBUG - Handling event with type [START_EVENT]
[10:34:25.299] DEBUG - Not performing validation to message since validator is DISABLED.
[10:34:25.299] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:34:25.299] DEBUG - Calling start on the router
[10:34:25.300] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[10:34:25.300] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[10:34:25.310] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[10:34:25.320] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:34:25.321] DEBUG - Got lock
[10:34:25.321] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:34:25.321] DEBUG - Passing event to listener. Event type is [CONNECTED]
[10:34:25.322] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[10:34:25.322] DEBUG - Handling event with type [CONNECT_EVENT]
[10:34:25.322] DEBUG - Not performing validation to message since validator is DISABLED.
[10:34:25.322] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:34:25.323] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:34:25.323] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:34:25.323] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]
[10:34:25.323] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[10:34:25.323] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[10:34:25.323] DEBUG - Connected to peer aaa://172.16.133.122:3868
[10:34:25.324] DEBUG - Send CER message
[10:34:25.324] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[10:34:25.333] DEBUG - In getCommonApplications appIds size is [0]
[10:34:25.333] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[10:34:25.334] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[10:34:25.335] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:34:25.336] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]]
[10:34:25.337] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]]
[10:34:25.338] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:34:25.338] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[10:34:25.574] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[10:34:25.574] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]]
[10:34:25.606] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]]
[10:34:25.606] DEBUG - No data received ?
[10:34:25.606] DEBUG - Passing message on to parent
[10:34:25.606] DEBUG - Received message of size [276]
[10:34:25.606] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:34:25.607] DEBUG - Got lock
[10:34:25.607] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:34:25.607] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:34:25.608] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[10:34:25.608] DEBUG - Handling event with type [CEA_EVENT]
[10:34:25.608] DEBUG - Not performing validation to message since validator is DISABLED.
[10:34:25.608] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:34:25.608] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:34:25.608] DEBUG - Finished passing message on to parent
[10:34:25.608] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[10:34:25.609] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[10:34:25.609] DEBUG - In getCommonApplications appIds size is [1]
[10:34:25.610] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:34:25.611] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[10:34:25.611] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[10:34:25.615] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[10:34:25.617] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[10:34:25.623] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@1185a2a8)
[10:34:25.624] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[10:34:25.625] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[10:34:25.628] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[10:34:25.628] INFO  - Parsing: scn/mms/msg/mms.msg
[10:34:26.579] ERROR - 
java.lang.NumberFormatException: For input string: "10415 ; 0=No, 1=Yes"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Integer.parseInt(Integer.java:492)
	at java.lang.Integer.parseInt(Integer.java:527)
	at pl.p4.diameter.avp.AvpInfo.getVendorCode(AvpInfo.java:50)
	at pl.p4.diameter.msg.MessageHelper.addAvps(MessageHelper.java:211)
	at pl.p4.diameter.msg.MessageHelper.addAvps(MessageHelper.java:226)
	at pl.p4.diameter.msg.MessageHelper.addAvps(MessageHelper.java:226)
	at pl.p4.diameter.msg.MessageHelper.createRequestFromXML(MessageHelper.java:136)
	at pl.p4.diameter.msg.MessageHelper.createMessageFromXML(MessageHelper.java:102)
	at pl.p4.diameter.msg.MessageHelper.sendMessage(MessageHelper.java:44)
	at pl.p4.diameter.scn.Message.run(Message.java:39)
	at pl.p4.diameter.scn.Scenario.run(Scenario.java:84)
	at pl.p4.diameter.client.jDiamClient.main(jDiamClient.java:152)
[10:34:26.584] INFO  - Stopping stack
[10:34:26.584] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:34:26.585] DEBUG - In stopping. Going to disconnect all peers in peer table
[10:34:26.585] DEBUG - Handling event with type [STOP_EVENT]
[10:34:26.585] DEBUG - Not performing validation to message since validator is DISABLED.
[10:34:26.586] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[10:34:26.586] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[10:34:26.586] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[10:34:26.586] DEBUG - Send DPR message with Disconnect-Cause [0]
[10:34:26.586] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:34:26.586] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]]
[10:34:26.587] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]]
[10:34:26.587] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:34:26.587] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[10:34:26.587] DEBUG - Calling stopped() on PeerTableImpl
[10:34:26.588] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[10:34:26.589] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]]
[10:34:26.589] DEBUG - No data received ?
[10:34:26.589] DEBUG - Passing message on to parent
[10:34:26.589] DEBUG - Received message of size [84]
[10:34:26.589] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:34:26.589] DEBUG - Got lock
[10:34:26.589] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:34:26.589] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:34:26.589] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[10:34:26.590] DEBUG - Handling event with type [DPA_EVENT]
[10:34:26.590] DEBUG - Not performing validation to message since validator is DISABLED.
[10:34:26.590] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:34:26.590] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:34:26.590] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[10:34:26.590] DEBUG - Finished passing message on to parent
[10:34:26.590] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[10:34:26.591] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]]
[10:34:26.591] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:34:26.591] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]]
[10:34:26.591] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:34:26.592] DEBUG - Got lock
[10:34:26.592] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:34:26.592] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[10:34:26.592] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[10:34:26.592] DEBUG - Handling event with type [DISCONNECT_EVENT]
[10:34:26.592] DEBUG - Not performing validation to message since validator is DISABLED.
[10:34:26.592] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:34:26.593] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:34:26.593] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]]
[10:34:26.593] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]]
[10:34:26.593] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:34:26.593] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:34:26.593] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[10:34:26.594] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[10:34:26.594] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:34:26.594] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:34:26.594] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]]
[10:34:26.594] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54702]]
[10:34:26.594] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:34:26.594] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[10:34:26.594] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:34:26.595] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:34:26.595] DEBUG - Stopping ... [2] FSM threads are running
[10:34:26.594] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:34:26.595] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[10:34:26.596] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:34:26.596] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:34:26.596] DEBUG - Stopping ... [1] FSM threads are running
[10:34:26.688] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[10:34:26.688] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:34:26.688] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:34:26.688] DEBUG - Stopping ... [0] FSM threads are running
[10:34:26.838] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[10:34:26.839] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:34:26.840] INFO  - Destroying stack
[10:34:26.840] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[10:34:26.840] DEBUG - Calling destroy on router
[10:35:10.267] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[10:35:10.509] INFO  - Initiating stack
[10:35:10.512] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:35:10.743] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[10:35:10.744] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[10:35:10.744] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[10:35:10.744] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[10:35:10.744] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[10:35:10.777] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[10:35:10.777] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[10:35:10.780] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[10:35:10.780] DEBUG - Going to loop through configured realms and add them into a network map
[10:35:10.780] DEBUG - Getting config for realm [emblacom.com]
[10:35:10.780] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[10:35:10.781] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[10:35:10.790] DEBUG - Initializing Peer Table.
[10:35:10.790] DEBUG - Populating peerTable from configuration
[10:35:10.812] DEBUG - Maximum FSM Queue size is [10000]
[10:35:10.816] DEBUG - Initializing QueueStat @ Thread[main]
[10:35:10.817] DEBUG - Finished Initializing QueueStat @ Thread[main]
[10:35:10.818] DEBUG - Starting FSM Thread 1 of 3
[10:35:10.819] DEBUG - Starting FSM Thread 2 of 3
[10:35:10.819] DEBUG - Starting ... [1] FSM threads are running
[10:35:10.819] DEBUG - Starting FSM Thread 3 of 3
[10:35:10.820] DEBUG - Starting ... [2] FSM threads are running
[10:35:10.820] DEBUG - Starting ... [3] FSM threads are running
[10:35:10.844] DEBUG - Destination address is set to [testblade04] : [3868]
[10:35:10.844] DEBUG - Origin address is set to [0.0.0.0] : [0]
[10:35:10.845] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] to peer table
[10:35:10.845] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:35:10.846] INFO  - Starting stack
[10:35:10.868] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[10:35:10.868] DEBUG - Handling event with type [START_EVENT]
[10:35:10.868] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:10.869] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:35:10.869] DEBUG - Calling start on the router
[10:35:10.869] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[10:35:10.869] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[10:35:10.879] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[10:35:10.890] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:35:10.890] DEBUG - Got lock
[10:35:10.890] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:35:10.890] DEBUG - Passing event to listener. Event type is [CONNECTED]
[10:35:10.891] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[10:35:10.892] DEBUG - Handling event with type [CONNECT_EVENT]
[10:35:10.892] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:10.892] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:35:10.892] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:35:10.892] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:35:10.893] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=54705]
[10:35:10.893] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[10:35:10.893] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[10:35:10.893] DEBUG - Connected to peer aaa://172.16.133.122:3868
[10:35:10.894] DEBUG - Send CER message
[10:35:10.895] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[10:35:10.904] DEBUG - In getCommonApplications appIds size is [0]
[10:35:10.904] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[10:35:10.904] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[10:35:10.905] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:35:10.906] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54705]]
[10:35:10.907] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54705]]
[10:35:10.907] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:35:10.907] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[10:35:11.145] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[10:35:11.145] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54705]]
[10:35:11.173] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54705]]
[10:35:11.173] DEBUG - No data received ?
[10:35:11.173] DEBUG - Passing message on to parent
[10:35:11.174] DEBUG - Received message of size [276]
[10:35:11.174] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:35:11.174] DEBUG - Got lock
[10:35:11.174] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:35:11.174] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:35:11.175] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[10:35:11.175] DEBUG - Handling event with type [CEA_EVENT]
[10:35:11.175] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:11.175] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:35:11.175] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:35:11.176] DEBUG - Finished passing message on to parent
[10:35:11.176] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[10:35:11.176] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[10:35:11.177] DEBUG - In getCommonApplications appIds size is [1]
[10:35:11.177] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:35:11.178] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[10:35:11.178] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[10:35:11.186] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[10:35:11.188] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[10:35:11.194] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@5c79cc94)
[10:35:11.196] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[10:35:11.196] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[10:35:11.199] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[10:35:11.200] INFO  - Parsing: scn/mms/msg/mms.msg
[10:35:12.113] ERROR - 
java.lang.NumberFormatException: For input string: "No"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Integer.parseInt(Integer.java:492)
	at java.lang.Integer.parseInt(Integer.java:527)
	at pl.p4.diameter.msg.MessageHelper.addAVP(MessageHelper.java:276)
	at pl.p4.diameter.msg.MessageHelper.addAvps(MessageHelper.java:229)
	at pl.p4.diameter.msg.MessageHelper.addAvps(MessageHelper.java:226)
	at pl.p4.diameter.msg.MessageHelper.addAvps(MessageHelper.java:226)
	at pl.p4.diameter.msg.MessageHelper.createRequestFromXML(MessageHelper.java:136)
	at pl.p4.diameter.msg.MessageHelper.createMessageFromXML(MessageHelper.java:102)
	at pl.p4.diameter.msg.MessageHelper.sendMessage(MessageHelper.java:44)
	at pl.p4.diameter.scn.Message.run(Message.java:39)
	at pl.p4.diameter.scn.Scenario.run(Scenario.java:84)
	at pl.p4.diameter.client.jDiamClient.main(jDiamClient.java:152)
[10:35:12.120] INFO  - Stopping stack
[10:35:12.120] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:35:12.121] DEBUG - In stopping. Going to disconnect all peers in peer table
[10:35:12.122] DEBUG - Handling event with type [STOP_EVENT]
[10:35:12.122] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:12.122] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[10:35:12.123] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[10:35:12.124] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[10:35:12.124] DEBUG - Send DPR message with Disconnect-Cause [0]
[10:35:12.124] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:35:12.125] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54705]]
[10:35:12.125] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54705]]
[10:35:12.125] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:35:12.127] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[10:35:12.128] DEBUG - Calling stopped() on PeerTableImpl
[10:35:12.128] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[10:35:12.128] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54705]]
[10:35:12.129] DEBUG - No data received ?
[10:35:12.129] DEBUG - Passing message on to parent
[10:35:12.129] DEBUG - Received message of size [84]
[10:35:12.129] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:35:12.129] DEBUG - Got lock
[10:35:12.129] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:35:12.129] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:35:12.130] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[10:35:12.130] DEBUG - Handling event with type [DPA_EVENT]
[10:35:12.130] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:12.130] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:35:12.130] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:35:12.130] DEBUG - Finished passing message on to parent
[10:35:12.131] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54705]]
[10:35:12.132] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:35:12.132] DEBUG - Got lock
[10:35:12.132] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:35:12.132] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[10:35:12.133] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[10:35:12.133] DEBUG - Handling event with type [DISCONNECT_EVENT]
[10:35:12.133] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:12.133] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [9999].
[10:35:12.133] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:35:12.133] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54705]]
[10:35:12.136] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[10:35:12.136] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[10:35:12.136] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:35:12.136] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54705]]
[10:35:12.136] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54705]]
[10:35:12.137] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:35:12.137] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[10:35:12.137] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:35:12.137] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:35:12.138] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[10:35:12.138] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:35:12.138] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:35:12.138] DEBUG - Stopping ... [2] FSM threads are running
[10:35:12.139] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:35:12.139] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[10:35:12.139] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[10:35:12.139] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:35:12.139] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:35:12.139] DEBUG - Stopping ... [1] FSM threads are running
[10:35:12.228] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[10:35:12.228] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:35:12.228] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:35:12.228] DEBUG - Stopping ... [0] FSM threads are running
[10:35:12.378] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[10:35:12.380] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:35:12.380] INFO  - Destroying stack
[10:35:12.380] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[10:35:12.380] DEBUG - Calling destroy on router
[10:35:37.750] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[10:35:37.969] INFO  - Initiating stack
[10:35:37.971] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:35:38.208] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[10:35:38.209] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[10:35:38.209] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[10:35:38.209] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[10:35:38.210] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[10:35:38.240] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[10:35:38.240] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[10:35:38.242] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[10:35:38.242] DEBUG - Going to loop through configured realms and add them into a network map
[10:35:38.243] DEBUG - Getting config for realm [emblacom.com]
[10:35:38.243] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[10:35:38.243] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[10:35:38.251] DEBUG - Initializing Peer Table.
[10:35:38.252] DEBUG - Populating peerTable from configuration
[10:35:38.272] DEBUG - Maximum FSM Queue size is [10000]
[10:35:38.275] DEBUG - Initializing QueueStat @ Thread[main]
[10:35:38.275] DEBUG - Finished Initializing QueueStat @ Thread[main]
[10:35:38.277] DEBUG - Starting FSM Thread 1 of 3
[10:35:38.278] DEBUG - Starting FSM Thread 2 of 3
[10:35:38.278] DEBUG - Starting ... [1] FSM threads are running
[10:35:38.278] DEBUG - Starting FSM Thread 3 of 3
[10:35:38.278] DEBUG - Starting ... [2] FSM threads are running
[10:35:38.278] DEBUG - Starting ... [3] FSM threads are running
[10:35:38.302] DEBUG - Destination address is set to [testblade04] : [3868]
[10:35:38.302] DEBUG - Origin address is set to [0.0.0.0] : [0]
[10:35:38.303] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] to peer table
[10:35:38.303] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:35:38.304] INFO  - Starting stack
[10:35:38.326] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[10:35:38.326] DEBUG - Handling event with type [START_EVENT]
[10:35:38.326] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:38.327] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:35:38.327] DEBUG - Calling start on the router
[10:35:38.327] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[10:35:38.327] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[10:35:38.335] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[10:35:38.345] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:35:38.346] DEBUG - Got lock
[10:35:38.346] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:35:38.346] DEBUG - Passing event to listener. Event type is [CONNECTED]
[10:35:38.347] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[10:35:38.347] DEBUG - Handling event with type [CONNECT_EVENT]
[10:35:38.347] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:38.348] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:35:38.348] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:35:38.348] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:35:38.348] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]
[10:35:38.348] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[10:35:38.349] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[10:35:38.349] DEBUG - Connected to peer aaa://172.16.133.122:3868
[10:35:38.349] DEBUG - Send CER message
[10:35:38.349] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[10:35:38.358] DEBUG - In getCommonApplications appIds size is [0]
[10:35:38.358] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[10:35:38.358] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[10:35:38.359] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:35:38.360] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:38.361] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:38.361] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:35:38.362] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[10:35:38.599] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[10:35:38.599] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:38.629] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:38.630] DEBUG - No data received ?
[10:35:38.630] DEBUG - Passing message on to parent
[10:35:38.630] DEBUG - Received message of size [276]
[10:35:38.630] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:35:38.630] DEBUG - Got lock
[10:35:38.630] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:35:38.631] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:35:38.631] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[10:35:38.631] DEBUG - Handling event with type [CEA_EVENT]
[10:35:38.632] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:38.632] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:35:38.632] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:35:38.632] DEBUG - Finished passing message on to parent
[10:35:38.632] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[10:35:38.632] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[10:35:38.633] DEBUG - In getCommonApplications appIds size is [1]
[10:35:38.634] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:35:38.634] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[10:35:38.635] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[10:35:38.639] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[10:35:38.641] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[10:35:38.646] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@5c79cc94)
[10:35:38.648] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[10:35:38.648] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[10:35:38.651] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[10:35:38.652] INFO  - Parsing: scn/mms/msg/mms.msg
[10:35:39.816] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2569570721; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 10:35:39 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 10:35:39 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[10:35:39.827] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[10:35:39.827] DEBUG - In getSingleApplicationId for application id [4]
[10:35:39.827] DEBUG - Application Ids in this message are:
[10:35:39.828] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:35:39.828] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:35:39.828] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:35:39.828] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[10:35:39.829] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[10:35:39.829] DEBUG - In getSingleApplicationId for application id [4]
[10:35:39.829] DEBUG - Application Ids in this message are:
[10:35:39.829] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:35:39.829] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:35:39.829] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:35:39.829] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[10:35:39.829] DEBUG - Looping through peers in realm [emblacom.com]
[10:35:39.829] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[10:35:39.830] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[10:35:39.830] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] for name [172.16.133.122]
[10:35:39.830] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[10:35:39.830] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}]] from list [[172.16.133.122]]
[10:35:39.830] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[10:35:39.830] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] for sending message [MessageImpl{commandCode=272, flags=128}]
[10:35:39.830] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}]
[10:35:39.830] DEBUG - Handling event with type [SEND_MSG_EVENT]
[10:35:39.831] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:39.831] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[10:35:39.831] DEBUG - Message was submitted to be sent, now adding statistics
[10:35:39.831] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[10:35:39.831] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[10:35:39.831] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:35:39.832] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:39.832] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:39.833] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:35:39.891] DEBUG - Just read [744] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:39.892] DEBUG - No data received ?
[10:35:39.892] DEBUG - Passing message on to parent
[10:35:39.892] DEBUG - Received message of size [744]
[10:35:39.892] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:35:39.892] DEBUG - Got lock
[10:35:39.892] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:35:39.892] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:35:39.893] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[10:35:39.893] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[10:35:39.893] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:39.893] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:35:39.893] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:35:39.893] DEBUG - Finished passing message on to parent
[10:35:39.894] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[10:35:39.894] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[10:35:39.894] DEBUG - Receiving message in client.
[10:35:39.894] DEBUG - Message is an answer
[10:35:39.895] INFO  - Answer received: NULL
[10:35:39.896] INFO  - Scenario executed in 1.26 s
[10:35:39.897] INFO  - Stopping stack
[10:35:39.897] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:35:39.898] DEBUG - In stopping. Going to disconnect all peers in peer table
[10:35:39.899] DEBUG - Handling event with type [STOP_EVENT]
[10:35:39.899] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:39.899] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[10:35:39.899] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[10:35:39.900] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[10:35:39.900] DEBUG - Send DPR message with Disconnect-Cause [0]
[10:35:39.900] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:35:39.900] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:39.901] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:39.901] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:35:39.901] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[10:35:39.902] DEBUG - Calling stopped() on PeerTableImpl
[10:35:39.902] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[10:35:39.905] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:39.905] DEBUG - No data received ?
[10:35:39.905] DEBUG - Passing message on to parent
[10:35:39.905] DEBUG - Received message of size [84]
[10:35:39.905] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:35:39.905] DEBUG - Got lock
[10:35:39.906] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:35:39.906] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:35:39.906] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[10:35:39.906] DEBUG - Handling event with type [DPA_EVENT]
[10:35:39.906] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:39.906] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:35:39.906] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:35:39.907] DEBUG - Finished passing message on to parent
[10:35:39.907] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:39.908] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:35:39.908] DEBUG - Got lock
[10:35:39.908] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:35:39.908] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[10:35:39.909] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[10:35:39.909] DEBUG - Handling event with type [DISCONNECT_EVENT]
[10:35:39.909] DEBUG - Not performing validation to message since validator is DISABLED.
[10:35:39.909] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [9999].
[10:35:39.909] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:35:39.909] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:39.910] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[10:35:39.910] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[10:35:39.910] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:35:39.910] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:39.911] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54709]]
[10:35:39.911] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:35:39.911] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[10:35:39.911] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:35:39.911] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:35:39.912] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[10:35:39.912] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:35:39.912] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:35:39.912] DEBUG - Stopping ... [2] FSM threads are running
[10:35:39.913] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:35:39.913] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[10:35:39.913] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[10:35:39.913] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:35:39.913] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:35:39.913] DEBUG - Stopping ... [1] FSM threads are running
[10:35:40.002] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[10:35:40.002] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:35:40.002] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:35:40.002] DEBUG - Stopping ... [0] FSM threads are running
[10:35:40.153] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[10:35:40.154] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:35:40.154] INFO  - Destroying stack
[10:35:40.154] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[10:35:40.154] DEBUG - Calling destroy on router
[10:40:25.798] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[10:40:26.074] INFO  - Initiating stack
[10:40:26.077] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:40:26.309] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[10:40:26.309] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[10:40:26.310] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[10:40:26.310] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[10:40:26.310] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[10:40:26.340] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[10:40:26.340] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[10:40:26.342] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[10:40:26.342] DEBUG - Going to loop through configured realms and add them into a network map
[10:40:26.342] DEBUG - Getting config for realm [emblacom.com]
[10:40:26.342] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[10:40:26.343] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[10:40:26.350] DEBUG - Initializing Peer Table.
[10:40:26.351] DEBUG - Populating peerTable from configuration
[10:40:26.370] DEBUG - Maximum FSM Queue size is [10000]
[10:40:26.374] DEBUG - Initializing QueueStat @ Thread[main]
[10:40:26.374] DEBUG - Finished Initializing QueueStat @ Thread[main]
[10:40:26.376] DEBUG - Starting FSM Thread 1 of 3
[10:40:26.377] DEBUG - Starting FSM Thread 2 of 3
[10:40:26.377] DEBUG - Starting ... [1] FSM threads are running
[10:40:26.377] DEBUG - Starting FSM Thread 3 of 3
[10:40:26.377] DEBUG - Starting ... [2] FSM threads are running
[10:40:26.378] DEBUG - Starting ... [3] FSM threads are running
[10:40:26.403] DEBUG - Destination address is set to [testblade04] : [3868]
[10:40:26.403] DEBUG - Origin address is set to [0.0.0.0] : [0]
[10:40:26.404] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] to peer table
[10:40:26.404] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:40:26.405] INFO  - Starting stack
[10:40:26.426] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[10:40:26.426] DEBUG - Handling event with type [START_EVENT]
[10:40:26.426] DEBUG - Not performing validation to message since validator is DISABLED.
[10:40:26.427] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:40:26.427] DEBUG - Calling start on the router
[10:40:26.427] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[10:40:26.427] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[10:40:26.436] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[10:40:26.447] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:40:26.447] DEBUG - Got lock
[10:40:26.447] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:40:26.448] DEBUG - Passing event to listener. Event type is [CONNECTED]
[10:40:26.449] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[10:40:26.449] DEBUG - Handling event with type [CONNECT_EVENT]
[10:40:26.449] DEBUG - Not performing validation to message since validator is DISABLED.
[10:40:26.449] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:40:26.449] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:40:26.449] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:40:26.449] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]
[10:40:26.449] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[10:40:26.450] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[10:40:26.450] DEBUG - Connected to peer aaa://172.16.133.122:3868
[10:40:26.450] DEBUG - Send CER message
[10:40:26.450] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[10:40:26.459] DEBUG - In getCommonApplications appIds size is [0]
[10:40:26.459] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[10:40:26.460] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[10:40:26.460] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:40:26.461] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:26.462] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:26.462] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:40:26.462] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[10:40:26.700] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[10:40:26.700] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:26.727] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:26.727] DEBUG - No data received ?
[10:40:26.728] DEBUG - Passing message on to parent
[10:40:26.728] DEBUG - Received message of size [276]
[10:40:26.728] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:40:26.728] DEBUG - Got lock
[10:40:26.729] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:40:26.729] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:40:26.729] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[10:40:26.729] DEBUG - Handling event with type [CEA_EVENT]
[10:40:26.730] DEBUG - Not performing validation to message since validator is DISABLED.
[10:40:26.730] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:40:26.730] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:40:26.730] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[10:40:26.730] DEBUG - Finished passing message on to parent
[10:40:26.731] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[10:40:26.731] DEBUG - In getCommonApplications appIds size is [1]
[10:40:26.732] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:40:26.733] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[10:40:26.733] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[10:40:26.737] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[10:40:26.739] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[10:40:26.745] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@1185a2a8)
[10:40:26.747] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[10:40:26.747] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[10:40:26.750] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[10:40:26.751] INFO  - Parsing: scn/mms/msg/mms.msg
[10:40:27.599] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2569858823; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 10:40:27 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 10:40:27 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[10:40:27.607] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[10:40:27.607] DEBUG - In getSingleApplicationId for application id [4]
[10:40:27.607] DEBUG - Application Ids in this message are:
[10:40:27.607] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:40:27.608] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:40:27.608] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:40:27.608] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[10:40:27.608] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[10:40:27.608] DEBUG - In getSingleApplicationId for application id [4]
[10:40:27.608] DEBUG - Application Ids in this message are:
[10:40:27.608] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:40:27.608] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:40:27.609] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:40:27.609] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[10:40:27.609] DEBUG - Looping through peers in realm [emblacom.com]
[10:40:27.609] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[10:40:27.609] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[10:40:27.609] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] for name [172.16.133.122]
[10:40:27.609] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[10:40:27.610] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}]] from list [[172.16.133.122]]
[10:40:27.610] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[10:40:27.610] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] for sending message [MessageImpl{commandCode=272, flags=128}]
[10:40:27.610] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}]
[10:40:27.610] DEBUG - Handling event with type [SEND_MSG_EVENT]
[10:40:27.611] DEBUG - Not performing validation to message since validator is DISABLED.
[10:40:27.611] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[10:40:27.611] DEBUG - Message was submitted to be sent, now adding statistics
[10:40:27.611] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[10:40:27.611] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[10:40:27.612] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:40:27.612] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:27.613] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:27.613] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:40:27.659] DEBUG - Just read [744] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:27.659] DEBUG - No data received ?
[10:40:27.659] DEBUG - Passing message on to parent
[10:40:27.659] DEBUG - Received message of size [744]
[10:40:27.659] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:40:27.659] DEBUG - Got lock
[10:40:27.659] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:40:27.659] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:40:27.660] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[10:40:27.660] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[10:40:27.660] DEBUG - Not performing validation to message since validator is DISABLED.
[10:40:27.660] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:40:27.660] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:40:27.660] DEBUG - Finished passing message on to parent
[10:40:27.660] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[10:40:27.660] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[10:40:27.660] DEBUG - Receiving message in client.
[10:40:27.661] DEBUG - Message is an answer
[10:40:27.661] INFO  - Answer received: NULL
[10:40:27.663] INFO  - Scenario executed in 0.929 s
[10:40:27.663] INFO  - Stopping stack
[10:40:27.664] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:40:27.665] DEBUG - In stopping. Going to disconnect all peers in peer table
[10:40:27.665] DEBUG - Handling event with type [STOP_EVENT]
[10:40:27.665] DEBUG - Not performing validation to message since validator is DISABLED.
[10:40:27.666] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[10:40:27.666] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[10:40:27.666] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[10:40:27.666] DEBUG - Send DPR message with Disconnect-Cause [0]
[10:40:27.667] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:40:27.667] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:27.667] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:27.667] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:40:27.667] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[10:40:27.668] DEBUG - Calling stopped() on PeerTableImpl
[10:40:27.668] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[10:40:27.669] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:27.669] DEBUG - No data received ?
[10:40:27.669] DEBUG - Passing message on to parent
[10:40:27.669] DEBUG - Received message of size [84]
[10:40:27.669] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:40:27.669] DEBUG - Got lock
[10:40:27.669] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:40:27.670] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:40:27.670] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[10:40:27.670] DEBUG - Handling event with type [DPA_EVENT]
[10:40:27.670] DEBUG - Not performing validation to message since validator is DISABLED.
[10:40:27.670] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:40:27.670] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:40:27.671] DEBUG - Finished passing message on to parent
[10:40:27.671] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[10:40:27.671] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:27.671] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[10:40:27.671] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:40:27.671] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:27.672] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:40:27.672] DEBUG - Got lock
[10:40:27.672] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:40:27.672] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[10:40:27.672] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[10:40:27.672] DEBUG - Handling event with type [DISCONNECT_EVENT]
[10:40:27.672] DEBUG - Not performing validation to message since validator is DISABLED.
[10:40:27.672] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:40:27.673] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:40:27.673] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:40:27.673] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:27.673] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[10:40:27.673] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:27.673] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:40:27.673] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:40:27.673] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:27.673] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[10:40:27.673] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54716]]
[10:40:27.674] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:40:27.674] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:40:27.674] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:40:27.674] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[10:40:27.674] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[10:40:27.674] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:40:27.674] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:40:27.675] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:40:27.675] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:40:27.675] DEBUG - Stopping ... [2] FSM threads are running
[10:40:27.675] DEBUG - Stopping ... [1] FSM threads are running
[10:40:27.769] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[10:40:27.769] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:40:27.769] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:40:27.769] DEBUG - Stopping ... [0] FSM threads are running
[10:40:27.919] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[10:40:27.920] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:40:27.920] INFO  - Destroying stack
[10:40:27.920] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[10:40:27.920] DEBUG - Calling destroy on router
[10:44:32.603] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[10:44:32.871] INFO  - Initiating stack
[10:44:32.875] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:44:33.122] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[10:44:33.122] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[10:44:33.123] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[10:44:33.123] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[10:44:33.123] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[10:44:33.160] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[10:44:33.160] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[10:44:33.163] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[10:44:33.163] DEBUG - Going to loop through configured realms and add them into a network map
[10:44:33.163] DEBUG - Getting config for realm [emblacom.com]
[10:44:33.163] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[10:44:33.164] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[10:44:33.174] DEBUG - Initializing Peer Table.
[10:44:33.174] DEBUG - Populating peerTable from configuration
[10:44:33.199] DEBUG - Maximum FSM Queue size is [10000]
[10:44:33.203] DEBUG - Initializing QueueStat @ Thread[main]
[10:44:33.203] DEBUG - Finished Initializing QueueStat @ Thread[main]
[10:44:33.205] DEBUG - Starting FSM Thread 1 of 3
[10:44:33.206] DEBUG - Starting FSM Thread 2 of 3
[10:44:33.206] DEBUG - Starting ... [1] FSM threads are running
[10:44:33.207] DEBUG - Starting FSM Thread 3 of 3
[10:44:33.208] DEBUG - Starting ... [2] FSM threads are running
[10:44:33.208] DEBUG - Starting ... [3] FSM threads are running
[10:44:33.235] DEBUG - Destination address is set to [testblade04] : [3868]
[10:44:33.235] DEBUG - Origin address is set to [0.0.0.0] : [0]
[10:44:33.236] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}] to peer table
[10:44:33.236] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:44:33.237] INFO  - Starting stack
[10:44:33.263] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[10:44:33.263] DEBUG - Handling event with type [START_EVENT]
[10:44:33.264] DEBUG - Not performing validation to message since validator is DISABLED.
[10:44:33.264] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:44:33.264] DEBUG - Calling start on the router
[10:44:33.264] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[10:44:33.265] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[10:44:33.275] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[10:44:33.288] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:44:33.288] DEBUG - Got lock
[10:44:33.288] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:44:33.288] DEBUG - Passing event to listener. Event type is [CONNECTED]
[10:44:33.289] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[10:44:33.290] DEBUG - Handling event with type [CONNECT_EVENT]
[10:44:33.290] DEBUG - Not performing validation to message since validator is DISABLED.
[10:44:33.290] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:44:33.290] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:44:33.290] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:44:33.291] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]
[10:44:33.291] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[10:44:33.291] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[10:44:33.291] DEBUG - Connected to peer aaa://172.16.133.122:3868
[10:44:33.291] DEBUG - Send CER message
[10:44:33.291] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[10:44:33.302] DEBUG - In getCommonApplications appIds size is [0]
[10:44:33.303] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[10:44:33.303] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[10:44:33.304] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:44:33.304] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:33.306] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:33.306] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:44:33.306] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[10:44:33.541] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[10:44:33.541] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:33.569] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:33.569] DEBUG - No data received ?
[10:44:33.570] DEBUG - Passing message on to parent
[10:44:33.570] DEBUG - Received message of size [276]
[10:44:33.570] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:44:33.570] DEBUG - Got lock
[10:44:33.570] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:44:33.570] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:44:33.571] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[10:44:33.571] DEBUG - Handling event with type [CEA_EVENT]
[10:44:33.571] DEBUG - Not performing validation to message since validator is DISABLED.
[10:44:33.571] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:44:33.572] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:44:33.572] DEBUG - Finished passing message on to parent
[10:44:33.572] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[10:44:33.572] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[10:44:33.573] DEBUG - In getCommonApplications appIds size is [1]
[10:44:33.574] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:44:33.574] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[10:44:33.575] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[10:44:33.579] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[10:44:33.581] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[10:44:33.588] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@3918e589)
[10:44:33.589] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[10:44:33.590] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[10:44:33.594] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[10:44:33.594] INFO  - Parsing: scn/mms/msg/mms.msg
[10:44:34.075] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2570105622; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 10:44:34 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 10:44:34 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[10:44:34.084] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[10:44:34.084] DEBUG - In getSingleApplicationId for application id [4]
[10:44:34.085] DEBUG - Application Ids in this message are:
[10:44:34.085] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:44:34.085] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:44:34.085] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:44:34.085] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[10:44:34.085] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[10:44:34.086] DEBUG - In getSingleApplicationId for application id [4]
[10:44:34.086] DEBUG - Application Ids in this message are:
[10:44:34.086] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:44:34.086] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:44:34.087] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:44:34.087] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[10:44:34.087] DEBUG - Looping through peers in realm [emblacom.com]
[10:44:34.087] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[10:44:34.087] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[10:44:34.088] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}] for name [172.16.133.122]
[10:44:34.088] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[10:44:34.088] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}]] from list [[172.16.133.122]]
[10:44:34.088] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[10:44:34.089] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}] for sending message [MessageImpl{commandCode=272, flags=128}]
[10:44:34.089] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}]
[10:44:34.089] DEBUG - Handling event with type [SEND_MSG_EVENT]
[10:44:34.089] DEBUG - Not performing validation to message since validator is DISABLED.
[10:44:34.089] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[10:44:34.090] DEBUG - Message was submitted to be sent, now adding statistics
[10:44:34.090] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[10:44:34.090] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[10:44:34.091] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:44:34.092] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:34.092] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:34.092] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:44:50.091] INFO  - Answer received: NULL
[10:44:50.092] INFO  - Scenario executed in 16.516 s
[10:44:50.092] INFO  - Stopping stack
[10:44:50.092] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:44:50.094] DEBUG - In stopping. Going to disconnect all peers in peer table
[10:44:50.094] DEBUG - Handling event with type [STOP_EVENT]
[10:44:50.094] DEBUG - Not performing validation to message since validator is DISABLED.
[10:44:50.094] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[10:44:50.094] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[10:44:50.094] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[10:44:50.095] DEBUG - Send DPR message with Disconnect-Cause [0]
[10:44:50.095] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:44:50.095] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:50.096] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:50.096] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:44:50.096] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[10:44:50.096] DEBUG - Calling stopped() on PeerTableImpl
[10:44:50.097] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[10:44:50.097] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:50.097] DEBUG - No data received ?
[10:44:50.098] DEBUG - Passing message on to parent
[10:44:50.098] DEBUG - Received message of size [84]
[10:44:50.098] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:44:50.098] DEBUG - Got lock
[10:44:50.098] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:44:50.098] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:44:50.098] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[10:44:50.098] DEBUG - Handling event with type [DPA_EVENT]
[10:44:50.098] DEBUG - Not performing validation to message since validator is DISABLED.
[10:44:50.098] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:44:50.098] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:44:50.099] DEBUG - Finished passing message on to parent
[10:44:50.099] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[10:44:50.099] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:50.099] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[10:44:50.099] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:44:50.099] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:50.099] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:44:50.099] DEBUG - Got lock
[10:44:50.100] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:44:50.100] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[10:44:50.100] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[10:44:50.100] DEBUG - Handling event with type [DISCONNECT_EVENT]
[10:44:50.100] DEBUG - Not performing validation to message since validator is DISABLED.
[10:44:50.100] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:44:50.100] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:44:50.100] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:44:50.101] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:50.101] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[10:44:50.102] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:44:50.102] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:50.102] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:50.102] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:44:50.102] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54733]]
[10:44:50.102] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:44:50.102] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[10:44:50.102] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:44:50.103] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:44:50.103] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[10:44:50.103] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:44:50.103] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:44:50.103] DEBUG - Stopping ... [2] FSM threads are running
[10:44:50.197] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[10:44:50.197] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:44:50.197] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:44:50.197] DEBUG - Stopping ... [1] FSM threads are running
[10:44:50.203] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[10:44:50.203] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:44:50.203] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:44:50.203] DEBUG - Stopping ... [0] FSM threads are running
[10:44:50.347] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[10:44:50.348] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:44:50.348] INFO  - Destroying stack
[10:44:50.348] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[10:44:50.349] DEBUG - Calling destroy on router
[10:47:25.399] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[10:47:25.655] INFO  - Initiating stack
[10:47:25.658] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:47:25.924] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[10:47:25.925] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[10:47:25.925] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[10:47:25.925] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[10:47:25.926] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[10:47:25.962] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[10:47:25.962] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[10:47:25.965] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[10:47:25.965] DEBUG - Going to loop through configured realms and add them into a network map
[10:47:25.965] DEBUG - Getting config for realm [emblacom.com]
[10:47:25.966] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[10:47:25.966] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[10:47:25.976] DEBUG - Initializing Peer Table.
[10:47:25.977] DEBUG - Populating peerTable from configuration
[10:47:26.003] DEBUG - Maximum FSM Queue size is [10000]
[10:47:26.007] DEBUG - Initializing QueueStat @ Thread[main]
[10:47:26.008] DEBUG - Finished Initializing QueueStat @ Thread[main]
[10:47:26.010] DEBUG - Starting FSM Thread 1 of 3
[10:47:26.010] DEBUG - Starting FSM Thread 2 of 3
[10:47:26.011] DEBUG - Starting ... [1] FSM threads are running
[10:47:26.011] DEBUG - Starting FSM Thread 3 of 3
[10:47:26.012] DEBUG - Starting ... [2] FSM threads are running
[10:47:26.012] DEBUG - Starting ... [3] FSM threads are running
[10:47:26.038] DEBUG - Destination address is set to [testblade04] : [3868]
[10:47:26.038] DEBUG - Origin address is set to [0.0.0.0] : [0]
[10:47:26.039] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] to peer table
[10:47:26.040] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:47:26.041] INFO  - Starting stack
[10:47:26.066] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[10:47:26.067] DEBUG - Handling event with type [START_EVENT]
[10:47:26.067] DEBUG - Not performing validation to message since validator is DISABLED.
[10:47:26.067] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:47:26.067] DEBUG - Calling start on the router
[10:47:26.067] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[10:47:26.068] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[10:47:26.079] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[10:47:26.091] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:47:26.092] DEBUG - Got lock
[10:47:26.092] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:47:26.092] DEBUG - Passing event to listener. Event type is [CONNECTED]
[10:47:26.093] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[10:47:26.093] DEBUG - Handling event with type [CONNECT_EVENT]
[10:47:26.094] DEBUG - Not performing validation to message since validator is DISABLED.
[10:47:26.094] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:47:26.094] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:47:26.094] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:47:26.094] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]
[10:47:26.094] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[10:47:26.095] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[10:47:26.095] DEBUG - Connected to peer aaa://172.16.133.122:3868
[10:47:26.095] DEBUG - Send CER message
[10:47:26.096] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[10:47:26.106] DEBUG - In getCommonApplications appIds size is [0]
[10:47:26.106] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[10:47:26.107] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[10:47:26.107] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:47:26.108] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:26.109] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:26.110] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:47:26.110] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[10:47:26.346] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[10:47:26.346] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:26.375] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:26.375] DEBUG - No data received ?
[10:47:26.375] DEBUG - Passing message on to parent
[10:47:26.375] DEBUG - Received message of size [276]
[10:47:26.376] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:47:26.376] DEBUG - Got lock
[10:47:26.376] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:47:26.376] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:47:26.377] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[10:47:26.377] DEBUG - Handling event with type [CEA_EVENT]
[10:47:26.377] DEBUG - Not performing validation to message since validator is DISABLED.
[10:47:26.377] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:47:26.377] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:47:26.378] DEBUG - Finished passing message on to parent
[10:47:26.378] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[10:47:26.378] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[10:47:26.379] DEBUG - In getCommonApplications appIds size is [1]
[10:47:26.379] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:47:26.380] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[10:47:26.380] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[10:47:26.387] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[10:47:26.389] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[10:47:26.395] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@1185a2a8)
[10:47:26.397] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[10:47:26.397] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[10:47:26.400] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[10:47:26.401] INFO  - Parsing: scn/mms/msg/mms.msg
[10:47:26.928] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2570278424; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 10:47:26 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 10:47:26 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[10:47:26.938] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[10:47:26.938] DEBUG - In getSingleApplicationId for application id [4]
[10:47:26.938] DEBUG - Application Ids in this message are:
[10:47:26.938] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:47:26.938] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:47:26.938] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:47:26.939] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[10:47:26.939] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[10:47:26.939] DEBUG - In getSingleApplicationId for application id [4]
[10:47:26.939] DEBUG - Application Ids in this message are:
[10:47:26.939] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:47:26.939] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:47:26.939] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:47:26.939] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[10:47:26.940] DEBUG - Looping through peers in realm [emblacom.com]
[10:47:26.940] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[10:47:26.940] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[10:47:26.940] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] for name [172.16.133.122]
[10:47:26.940] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[10:47:26.940] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}]] from list [[172.16.133.122]]
[10:47:26.940] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[10:47:26.941] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] for sending message [MessageImpl{commandCode=272, flags=128}]
[10:47:26.941] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}]
[10:47:26.941] DEBUG - Handling event with type [SEND_MSG_EVENT]
[10:47:26.941] DEBUG - Not performing validation to message since validator is DISABLED.
[10:47:26.941] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[10:47:26.941] DEBUG - Message was submitted to be sent, now adding statistics
[10:47:26.941] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[10:47:26.941] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[10:47:26.942] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:47:26.943] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:26.944] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:26.944] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:47:26.991] DEBUG - Just read [744] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:26.991] DEBUG - No data received ?
[10:47:26.991] DEBUG - Passing message on to parent
[10:47:26.992] DEBUG - Received message of size [744]
[10:47:26.992] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:47:26.992] DEBUG - Got lock
[10:47:26.992] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:47:26.992] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:47:26.993] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[10:47:26.993] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[10:47:26.993] DEBUG - Not performing validation to message since validator is DISABLED.
[10:47:26.993] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:47:26.993] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:47:26.993] DEBUG - Finished passing message on to parent
[10:47:26.994] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[10:47:26.994] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[10:47:26.994] DEBUG - Receiving message in client.
[10:47:26.994] DEBUG - Message is an answer
[10:47:26.995] INFO  - Answer received: NULL
[10:47:26.996] INFO  - Scenario executed in 0.615 s
[10:47:26.996] INFO  - Stopping stack
[10:47:26.996] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:47:26.997] DEBUG - In stopping. Going to disconnect all peers in peer table
[10:47:26.998] DEBUG - Handling event with type [STOP_EVENT]
[10:47:26.998] DEBUG - Not performing validation to message since validator is DISABLED.
[10:47:26.998] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[10:47:26.998] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[10:47:26.998] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[10:47:26.998] DEBUG - Send DPR message with Disconnect-Cause [0]
[10:47:26.999] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:47:26.999] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:26.999] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:26.999] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:47:27.000] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[10:47:27.000] DEBUG - Calling stopped() on PeerTableImpl
[10:47:27.000] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[10:47:27.001] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:27.001] DEBUG - No data received ?
[10:47:27.001] DEBUG - Passing message on to parent
[10:47:27.002] DEBUG - Received message of size [84]
[10:47:27.002] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:47:27.002] DEBUG - Got lock
[10:47:27.002] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:47:27.002] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:47:27.002] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[10:47:27.002] DEBUG - Handling event with type [DPA_EVENT]
[10:47:27.002] DEBUG - Not performing validation to message since validator is DISABLED.
[10:47:27.002] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:47:27.002] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:47:27.002] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[10:47:27.003] DEBUG - Finished passing message on to parent
[10:47:27.003] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[10:47:27.003] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:27.003] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:47:27.003] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:27.004] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:47:27.004] DEBUG - Got lock
[10:47:27.004] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:47:27.004] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[10:47:27.004] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[10:47:27.004] DEBUG - Handling event with type [DISCONNECT_EVENT]
[10:47:27.004] DEBUG - Not performing validation to message since validator is DISABLED.
[10:47:27.005] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:47:27.005] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:47:27.005] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:47:27.005] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:27.005] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[10:47:27.005] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:47:27.005] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:27.005] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:27.005] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54739]]
[10:47:27.006] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:47:27.006] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:47:27.006] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[10:47:27.006] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:47:27.006] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:47:27.006] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[10:47:27.007] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:47:27.007] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:47:27.007] DEBUG - Stopping ... [2] FSM threads are running
[10:47:27.101] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[10:47:27.101] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:47:27.101] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:47:27.101] DEBUG - Stopping ... [1] FSM threads are running
[10:47:27.107] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[10:47:27.107] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:47:27.107] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:47:27.107] DEBUG - Stopping ... [0] FSM threads are running
[10:47:27.250] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[10:47:27.251] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:47:27.251] INFO  - Destroying stack
[10:47:27.251] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[10:47:27.251] DEBUG - Calling destroy on router
[10:48:12.687] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[10:48:12.932] INFO  - Initiating stack
[10:48:12.935] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:48:13.173] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[10:48:13.174] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[10:48:13.174] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[10:48:13.175] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[10:48:13.175] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[10:48:13.208] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[10:48:13.208] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[10:48:13.210] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[10:48:13.211] DEBUG - Going to loop through configured realms and add them into a network map
[10:48:13.211] DEBUG - Getting config for realm [emblacom.com]
[10:48:13.211] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[10:48:13.212] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[10:48:13.221] DEBUG - Initializing Peer Table.
[10:48:13.221] DEBUG - Populating peerTable from configuration
[10:48:13.241] DEBUG - Maximum FSM Queue size is [10000]
[10:48:13.246] DEBUG - Initializing QueueStat @ Thread[main]
[10:48:13.246] DEBUG - Finished Initializing QueueStat @ Thread[main]
[10:48:13.248] DEBUG - Starting FSM Thread 1 of 3
[10:48:13.249] DEBUG - Starting FSM Thread 2 of 3
[10:48:13.249] DEBUG - Starting ... [1] FSM threads are running
[10:48:13.249] DEBUG - Starting FSM Thread 3 of 3
[10:48:13.250] DEBUG - Starting ... [2] FSM threads are running
[10:48:13.250] DEBUG - Starting ... [3] FSM threads are running
[10:48:13.274] DEBUG - Destination address is set to [testblade04] : [3868]
[10:48:13.274] DEBUG - Origin address is set to [0.0.0.0] : [0]
[10:48:13.275] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] to peer table
[10:48:13.275] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:48:13.277] INFO  - Starting stack
[10:48:13.301] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[10:48:13.301] DEBUG - Handling event with type [START_EVENT]
[10:48:13.301] DEBUG - Not performing validation to message since validator is DISABLED.
[10:48:13.301] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:48:13.302] DEBUG - Calling start on the router
[10:48:13.302] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[10:48:13.302] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[10:48:13.311] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[10:48:13.322] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:48:13.322] DEBUG - Got lock
[10:48:13.323] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:48:13.323] DEBUG - Passing event to listener. Event type is [CONNECTED]
[10:48:13.324] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[10:48:13.324] DEBUG - Handling event with type [CONNECT_EVENT]
[10:48:13.324] DEBUG - Not performing validation to message since validator is DISABLED.
[10:48:13.324] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:48:13.325] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:48:13.325] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:48:13.325] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]
[10:48:13.325] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[10:48:13.326] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[10:48:13.326] DEBUG - Connected to peer aaa://172.16.133.122:3868
[10:48:13.326] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[10:48:13.326] DEBUG - Send CER message
[10:48:13.336] DEBUG - In getCommonApplications appIds size is [0]
[10:48:13.336] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[10:48:13.336] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[10:48:13.337] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:48:13.337] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:13.338] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:13.339] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:48:13.339] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[10:48:13.576] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[10:48:13.576] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:13.603] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:13.603] DEBUG - No data received ?
[10:48:13.604] DEBUG - Passing message on to parent
[10:48:13.604] DEBUG - Received message of size [276]
[10:48:13.604] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:48:13.604] DEBUG - Got lock
[10:48:13.604] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:48:13.604] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:48:13.606] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[10:48:13.606] DEBUG - Handling event with type [CEA_EVENT]
[10:48:13.606] DEBUG - Not performing validation to message since validator is DISABLED.
[10:48:13.606] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:48:13.606] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:48:13.606] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[10:48:13.606] DEBUG - Finished passing message on to parent
[10:48:13.607] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[10:48:13.607] DEBUG - In getCommonApplications appIds size is [1]
[10:48:13.608] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:48:13.609] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[10:48:13.609] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[10:48:13.613] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[10:48:13.615] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[10:48:13.621] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@1185a2a8)
[10:48:13.622] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[10:48:13.622] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[10:48:13.626] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[10:48:13.627] INFO  - Parsing: scn/mms/msg/mms.msg
[10:48:13.975] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2570325681; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 10:48:13 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 10:48:13 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[10:48:13.985] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[10:48:13.985] DEBUG - In getSingleApplicationId for application id [4]
[10:48:13.985] DEBUG - Application Ids in this message are:
[10:48:13.985] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:48:13.986] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:48:13.986] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:48:13.986] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[10:48:13.986] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[10:48:13.987] DEBUG - In getSingleApplicationId for application id [4]
[10:48:13.987] DEBUG - Application Ids in this message are:
[10:48:13.987] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:48:13.987] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:48:13.987] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:48:13.988] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[10:48:13.988] DEBUG - Looping through peers in realm [emblacom.com]
[10:48:13.988] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[10:48:13.988] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[10:48:13.989] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] for name [172.16.133.122]
[10:48:13.989] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[10:48:13.989] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}]] from list [[172.16.133.122]]
[10:48:13.989] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[10:48:13.989] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] for sending message [MessageImpl{commandCode=272, flags=128}]
[10:48:13.990] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}]
[10:48:13.990] DEBUG - Handling event with type [SEND_MSG_EVENT]
[10:48:13.990] DEBUG - Not performing validation to message since validator is DISABLED.
[10:48:13.990] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[10:48:13.990] DEBUG - Message was submitted to be sent, now adding statistics
[10:48:13.990] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[10:48:13.990] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[10:48:13.991] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:48:13.992] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:13.992] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:13.992] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:48:14.037] DEBUG - Just read [744] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:14.037] DEBUG - No data received ?
[10:48:14.037] DEBUG - Passing message on to parent
[10:48:14.037] DEBUG - Received message of size [744]
[10:48:14.037] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:48:14.037] DEBUG - Got lock
[10:48:14.037] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:48:14.037] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:48:14.038] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[10:48:14.038] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[10:48:14.038] DEBUG - Not performing validation to message since validator is DISABLED.
[10:48:14.038] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:48:14.038] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:48:14.038] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[10:48:14.038] DEBUG - Finished passing message on to parent
[10:48:14.039] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[10:48:14.039] DEBUG - Receiving message in client.
[10:48:14.039] DEBUG - Message is an answer
[10:48:14.040] INFO  - Answer received: NULL
[10:48:14.041] INFO  - Scenario executed in 0.431 s
[10:48:14.042] INFO  - Stopping stack
[10:48:14.042] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:48:14.043] DEBUG - In stopping. Going to disconnect all peers in peer table
[10:48:14.043] DEBUG - Handling event with type [STOP_EVENT]
[10:48:14.043] DEBUG - Not performing validation to message since validator is DISABLED.
[10:48:14.043] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[10:48:14.044] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[10:48:14.044] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[10:48:14.044] DEBUG - Send DPR message with Disconnect-Cause [0]
[10:48:14.044] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:48:14.045] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:14.045] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:14.045] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:48:14.045] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[10:48:14.046] DEBUG - Calling stopped() on PeerTableImpl
[10:48:14.046] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[10:48:14.047] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:14.047] DEBUG - No data received ?
[10:48:14.047] DEBUG - Passing message on to parent
[10:48:14.047] DEBUG - Received message of size [84]
[10:48:14.047] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:48:14.047] DEBUG - Got lock
[10:48:14.047] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:48:14.047] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:48:14.048] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[10:48:14.048] DEBUG - Handling event with type [DPA_EVENT]
[10:48:14.048] DEBUG - Not performing validation to message since validator is DISABLED.
[10:48:14.048] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:48:14.048] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:48:14.048] DEBUG - Finished passing message on to parent
[10:48:14.048] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[10:48:14.048] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:14.048] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[10:48:14.049] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:48:14.049] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:14.049] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:48:14.049] DEBUG - Got lock
[10:48:14.049] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:48:14.050] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[10:48:14.050] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[10:48:14.050] DEBUG - Handling event with type [DISCONNECT_EVENT]
[10:48:14.050] DEBUG - Not performing validation to message since validator is DISABLED.
[10:48:14.050] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:48:14.050] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:48:14.051] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:48:14.051] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:14.051] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[10:48:14.051] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:14.051] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:48:14.051] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:48:14.051] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[10:48:14.052] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:14.052] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54743]]
[10:48:14.052] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:48:14.052] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:48:14.052] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:48:14.052] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[10:48:14.053] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:48:14.053] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:48:14.053] DEBUG - Stopping ... [2] FSM threads are running
[10:48:14.147] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[10:48:14.147] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:48:14.147] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:48:14.147] DEBUG - Stopping ... [1] FSM threads are running
[10:48:14.153] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[10:48:14.153] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:48:14.153] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:48:14.154] DEBUG - Stopping ... [0] FSM threads are running
[10:48:14.296] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[10:48:14.297] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:48:14.297] INFO  - Destroying stack
[10:48:14.298] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[10:48:14.298] DEBUG - Calling destroy on router
[10:49:32.030] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[10:49:32.280] INFO  - Initiating stack
[10:49:32.283] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:49:32.526] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[10:49:32.527] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[10:49:32.528] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[10:49:32.528] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[10:49:32.528] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[10:49:32.560] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[10:49:32.561] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[10:49:32.563] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[10:49:32.563] DEBUG - Going to loop through configured realms and add them into a network map
[10:49:32.563] DEBUG - Getting config for realm [emblacom.com]
[10:49:32.564] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[10:49:32.564] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[10:49:32.574] DEBUG - Initializing Peer Table.
[10:49:32.574] DEBUG - Populating peerTable from configuration
[10:49:32.597] DEBUG - Maximum FSM Queue size is [10000]
[10:49:32.601] DEBUG - Initializing QueueStat @ Thread[main]
[10:49:32.601] DEBUG - Finished Initializing QueueStat @ Thread[main]
[10:49:32.603] DEBUG - Starting FSM Thread 1 of 3
[10:49:32.604] DEBUG - Starting FSM Thread 2 of 3
[10:49:32.604] DEBUG - Starting ... [1] FSM threads are running
[10:49:32.604] DEBUG - Starting FSM Thread 3 of 3
[10:49:32.605] DEBUG - Starting ... [2] FSM threads are running
[10:49:32.605] DEBUG - Starting ... [3] FSM threads are running
[10:49:32.629] DEBUG - Destination address is set to [testblade04] : [3868]
[10:49:32.629] DEBUG - Origin address is set to [0.0.0.0] : [0]
[10:49:32.630] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] to peer table
[10:49:32.630] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:49:32.631] INFO  - Starting stack
[10:49:32.654] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[10:49:32.654] DEBUG - Handling event with type [START_EVENT]
[10:49:32.655] DEBUG - Not performing validation to message since validator is DISABLED.
[10:49:32.655] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:49:32.655] DEBUG - Calling start on the router
[10:49:32.655] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[10:49:32.655] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[10:49:32.665] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[10:49:32.679] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:49:32.679] DEBUG - Got lock
[10:49:32.680] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:49:32.680] DEBUG - Passing event to listener. Event type is [CONNECTED]
[10:49:32.681] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[10:49:32.681] DEBUG - Handling event with type [CONNECT_EVENT]
[10:49:32.681] DEBUG - Not performing validation to message since validator is DISABLED.
[10:49:32.681] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:49:32.681] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:49:32.682] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:49:32.682] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]
[10:49:32.682] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[10:49:32.682] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[10:49:32.682] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[10:49:32.682] DEBUG - Connected to peer aaa://172.16.133.122:3868
[10:49:32.683] DEBUG - Send CER message
[10:49:32.694] DEBUG - In getCommonApplications appIds size is [0]
[10:49:32.694] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[10:49:32.694] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[10:49:32.695] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:49:32.695] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:32.697] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:32.697] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:49:32.698] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[10:49:32.933] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[10:49:32.934] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:32.962] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:32.962] DEBUG - No data received ?
[10:49:32.962] DEBUG - Passing message on to parent
[10:49:32.962] DEBUG - Received message of size [276]
[10:49:32.963] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:49:32.963] DEBUG - Got lock
[10:49:32.963] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:49:32.963] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:49:32.964] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[10:49:32.964] DEBUG - Handling event with type [CEA_EVENT]
[10:49:32.964] DEBUG - Not performing validation to message since validator is DISABLED.
[10:49:32.964] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:49:32.965] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:49:32.965] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[10:49:32.965] DEBUG - Finished passing message on to parent
[10:49:32.965] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[10:49:32.966] DEBUG - In getCommonApplications appIds size is [1]
[10:49:32.967] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:49:32.967] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[10:49:32.968] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[10:49:32.972] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[10:49:32.974] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[10:49:32.980] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@5c79cc94)
[10:49:32.982] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[10:49:32.982] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[10:49:32.985] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[10:49:32.986] INFO  - Parsing: scn/mms/msg/mms.msg
[10:49:33.108] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2570405033; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 10:49:33 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 10:49:33 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[10:49:33.118] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[10:49:33.119] DEBUG - In getSingleApplicationId for application id [4]
[10:49:33.119] DEBUG - Application Ids in this message are:
[10:49:33.119] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:49:33.119] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:49:33.120] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:49:33.120] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[10:49:33.120] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[10:49:33.120] DEBUG - In getSingleApplicationId for application id [4]
[10:49:33.120] DEBUG - Application Ids in this message are:
[10:49:33.121] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:49:33.121] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[10:49:33.121] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[10:49:33.121] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[10:49:33.121] DEBUG - Looping through peers in realm [emblacom.com]
[10:49:33.121] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[10:49:33.122] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[10:49:33.122] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] for name [172.16.133.122]
[10:49:33.122] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[10:49:33.122] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}]] from list [[172.16.133.122]]
[10:49:33.122] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[10:49:33.123] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] for sending message [MessageImpl{commandCode=272, flags=128}]
[10:49:33.123] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}]
[10:49:33.123] DEBUG - Handling event with type [SEND_MSG_EVENT]
[10:49:33.123] DEBUG - Not performing validation to message since validator is DISABLED.
[10:49:33.123] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[10:49:33.123] DEBUG - Message was submitted to be sent, now adding statistics
[10:49:33.124] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[10:49:33.124] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[10:49:33.124] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:49:33.125] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:33.126] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:33.126] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:49:33.173] DEBUG - Just read [744] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:33.173] DEBUG - No data received ?
[10:49:33.173] DEBUG - Passing message on to parent
[10:49:33.173] DEBUG - Received message of size [744]
[10:49:33.173] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:49:33.173] DEBUG - Got lock
[10:49:33.174] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:49:33.174] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:49:33.174] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[10:49:33.174] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[10:49:33.174] DEBUG - Not performing validation to message since validator is DISABLED.
[10:49:33.174] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:49:33.174] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:49:33.174] DEBUG - Finished passing message on to parent
[10:49:33.175] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[10:49:33.175] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[10:49:33.175] DEBUG - Receiving message in client.
[10:49:33.175] DEBUG - Message is an answer
[10:49:33.175] INFO  - Answer received: NULL
[10:49:33.177] INFO  - Scenario executed in 0.208 s
[10:49:33.177] INFO  - Stopping stack
[10:49:33.177] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:49:33.179] DEBUG - In stopping. Going to disconnect all peers in peer table
[10:49:33.179] DEBUG - Handling event with type [STOP_EVENT]
[10:49:33.179] DEBUG - Not performing validation to message since validator is DISABLED.
[10:49:33.179] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[10:49:33.179] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[10:49:33.179] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[10:49:33.180] DEBUG - Send DPR message with Disconnect-Cause [0]
[10:49:33.180] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:49:33.180] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:33.180] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:33.183] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:33.183] DEBUG - No data received ?
[10:49:33.183] DEBUG - Passing message on to parent
[10:49:33.183] DEBUG - Received message of size [84]
[10:49:33.183] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:49:33.183] DEBUG - Got lock
[10:49:33.183] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:49:33.184] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[10:49:33.184] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[10:49:33.184] DEBUG - Handling event with type [DPA_EVENT]
[10:49:33.184] DEBUG - Not performing validation to message since validator is DISABLED.
[10:49:33.184] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[10:49:33.184] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[10:49:33.185] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:49:33.185] DEBUG - Finished passing message on to parent
[10:49:33.185] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:33.185] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[10:49:33.185] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [OKAY]
[10:49:33.185] DEBUG - Unknown event type: DPA_EVENT in state OKAY
[10:49:33.185] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[10:49:33.185] DEBUG - Calling stopped() on PeerTableImpl
[10:49:33.186] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[10:49:33.186] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[10:49:33.186] DEBUG - Got lock
[10:49:33.186] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[10:49:33.186] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[10:49:33.187] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[10:49:33.187] DEBUG - Handling event with type [DISCONNECT_EVENT]
[10:49:33.187] DEBUG - Not performing validation to message since validator is DISABLED.
[10:49:33.187] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:49:33.187] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[10:49:33.187] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[10:49:33.187] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:33.187] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[10:49:33.188] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:49:33.188] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:33.188] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:33.188] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:49:33.436] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 3 Thread still active.
[10:49:33.686] DEBUG - Waited 250ms. Time remaining to wait: 1500ms. 3 Thread still active.
[10:49:33.936] DEBUG - Waited 250ms. Time remaining to wait: 1250ms. 3 Thread still active.
[10:49:34.186] DEBUG - Waited 250ms. Time remaining to wait: 1000ms. 3 Thread still active.
[10:49:34.436] DEBUG - Waited 250ms. Time remaining to wait: 750ms. 3 Thread still active.
[10:49:34.686] DEBUG - Waited 250ms. Time remaining to wait: 500ms. 3 Thread still active.
[10:49:34.936] DEBUG - Waited 250ms. Time remaining to wait: 250ms. 3 Thread still active.
[10:49:35.186] DEBUG - Waited 250ms. Time remaining to wait: 0ms. 3 Thread still active.
[10:49:35.188] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[10:49:35.188] INFO  - Destroying stack
[10:49:35.188] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[10:49:35.188] DEBUG - Calling destroy on router
[10:49:38.230] DEBUG - Sending timeout event
[10:49:38.230] DEBUG - Handling event with type [TIMEOUT_EVENT]
[10:49:38.230] DEBUG - Not performing validation to message since validator is DISABLED.
[10:49:38.230] DEBUG - Placing event [Event{name:TIMEOUT_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[10:49:38.230] DEBUG - Got Event [Event{name:TIMEOUT_EVENT, key:null, object:null}] from Queue
[10:49:38.230] DEBUG - Process event [Event{name:TIMEOUT_EVENT, key:null, object:null}]. Peer State is [STOPPING]
[10:49:38.230] DEBUG - In disconnect for [aaa://testblade04:3868]
[10:49:38.230] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:38.231] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54761]]
[10:49:38.231] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[10:49:38.231] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[10:49:38.231] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:49:38.231] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:49:38.231] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[10:49:38.231] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:49:38.231] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[10:49:38.232] DEBUG - Stopping ... [2] FSM threads are running
[10:49:38.331] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[10:49:38.331] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[10:49:38.331] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:49:38.331] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:49:38.331] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[10:49:38.331] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[10:49:38.331] DEBUG - Stopping ... [1] FSM threads are running
[10:49:38.331] DEBUG - Stopping ... [0] FSM threads are running
[11:01:25.122] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[11:01:25.386] INFO  - Initiating stack
[11:01:25.390] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:01:25.642] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[11:01:25.643] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[11:01:25.643] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[11:01:25.644] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[11:01:25.644] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[11:01:25.681] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[11:01:25.681] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[11:01:25.683] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[11:01:25.683] DEBUG - Going to loop through configured realms and add them into a network map
[11:01:25.683] DEBUG - Getting config for realm [emblacom.com]
[11:01:25.684] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[11:01:25.684] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[11:01:25.694] DEBUG - Initializing Peer Table.
[11:01:25.694] DEBUG - Populating peerTable from configuration
[11:01:25.716] DEBUG - Maximum FSM Queue size is [10000]
[11:01:25.720] DEBUG - Initializing QueueStat @ Thread[main]
[11:01:25.721] DEBUG - Finished Initializing QueueStat @ Thread[main]
[11:01:25.722] DEBUG - Starting FSM Thread 1 of 3
[11:01:25.723] DEBUG - Starting FSM Thread 2 of 3
[11:01:25.723] DEBUG - Starting ... [1] FSM threads are running
[11:01:25.724] DEBUG - Starting FSM Thread 3 of 3
[11:01:25.724] DEBUG - Starting ... [2] FSM threads are running
[11:01:25.724] DEBUG - Starting ... [3] FSM threads are running
[11:01:25.749] DEBUG - Destination address is set to [testblade04] : [3868]
[11:01:25.750] DEBUG - Origin address is set to [0.0.0.0] : [0]
[11:01:25.750] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@6604ec21}] to peer table
[11:01:25.751] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:01:25.752] INFO  - Starting stack
[11:01:25.774] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[11:01:25.774] DEBUG - Handling event with type [START_EVENT]
[11:01:25.774] DEBUG - Not performing validation to message since validator is DISABLED.
[11:01:25.775] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:01:25.775] DEBUG - Calling start on the router
[11:01:25.775] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[11:01:25.775] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[11:01:25.784] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[11:01:25.795] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:01:25.795] DEBUG - Got lock
[11:01:25.796] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:01:25.796] DEBUG - Passing event to listener. Event type is [CONNECTED]
[11:01:25.797] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[11:01:25.797] DEBUG - Handling event with type [CONNECT_EVENT]
[11:01:25.797] DEBUG - Not performing validation to message since validator is DISABLED.
[11:01:25.797] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:01:25.797] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:01:25.798] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:01:25.798] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]
[11:01:25.798] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[11:01:25.798] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[11:01:25.798] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[11:01:25.798] DEBUG - Connected to peer aaa://172.16.133.122:3868
[11:01:25.799] DEBUG - Send CER message
[11:01:25.809] DEBUG - In getCommonApplications appIds size is [0]
[11:01:25.809] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[11:01:25.809] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[11:01:25.810] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:01:25.810] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:25.812] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:25.812] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:01:25.812] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[11:01:26.048] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[11:01:26.048] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:26.077] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:26.078] DEBUG - No data received ?
[11:01:26.078] DEBUG - Passing message on to parent
[11:01:26.078] DEBUG - Received message of size [276]
[11:01:26.078] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:01:26.078] DEBUG - Got lock
[11:01:26.078] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:01:26.079] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:01:26.079] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[11:01:26.079] DEBUG - Handling event with type [CEA_EVENT]
[11:01:26.080] DEBUG - Not performing validation to message since validator is DISABLED.
[11:01:26.080] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:01:26.080] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:01:26.080] DEBUG - Finished passing message on to parent
[11:01:26.080] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[11:01:26.081] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[11:01:26.081] DEBUG - In getCommonApplications appIds size is [1]
[11:01:26.082] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:01:26.083] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[11:01:26.083] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[11:01:26.087] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[11:01:26.093] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[11:01:26.098] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@3c5de5e6)
[11:01:26.100] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[11:01:26.100] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[11:01:26.103] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[11:01:26.104] INFO  - Parsing: scn/mms/msg/mms.msg
[11:01:26.204] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2571118147; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 11:01:26 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 11:01:26 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[11:01:26.237] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[11:01:26.237] DEBUG - In getSingleApplicationId for application id [4]
[11:01:26.237] DEBUG - Application Ids in this message are:
[11:01:26.238] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:01:26.238] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:01:26.238] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:01:26.238] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[11:01:26.238] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[11:01:26.239] DEBUG - In getSingleApplicationId for application id [4]
[11:01:26.239] DEBUG - Application Ids in this message are:
[11:01:26.239] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:01:26.239] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:01:26.239] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:01:26.239] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[11:01:26.239] DEBUG - Looping through peers in realm [emblacom.com]
[11:01:26.240] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[11:01:26.240] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[11:01:26.240] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@6604ec21}] for name [172.16.133.122]
[11:01:26.240] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[11:01:26.240] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@6604ec21}]] from list [[172.16.133.122]]
[11:01:26.240] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[11:01:26.241] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@6604ec21}] for sending message [MessageImpl{commandCode=272, flags=128}]
[11:01:26.241] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@6604ec21}]
[11:01:26.241] DEBUG - Handling event with type [SEND_MSG_EVENT]
[11:01:26.241] DEBUG - Not performing validation to message since validator is DISABLED.
[11:01:26.241] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[11:01:26.241] DEBUG - Message was submitted to be sent, now adding statistics
[11:01:26.242] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[11:01:26.247] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[11:01:26.247] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:01:26.248] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:26.249] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:26.249] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:01:26.300] DEBUG - Just read [744] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:26.300] DEBUG - No data received ?
[11:01:26.300] DEBUG - Passing message on to parent
[11:01:26.301] DEBUG - Received message of size [744]
[11:01:26.301] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:01:26.301] DEBUG - Got lock
[11:01:26.301] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:01:26.301] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:01:26.301] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[11:01:26.301] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[11:01:26.301] DEBUG - Not performing validation to message since validator is DISABLED.
[11:01:26.301] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:01:26.301] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:01:26.302] DEBUG - Finished passing message on to parent
[11:01:26.302] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[11:01:26.302] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[11:01:26.302] DEBUG - Receiving message in client.
[11:01:26.302] DEBUG - Message is an answer
[11:01:26.303] DEBUG - Normal return from message sent, probably no answer!
[11:01:26.303] INFO  - Answer received: NULL
[11:01:26.303] INFO  - WAITING 2000ms
[11:01:28.304] INFO  - Scenario executed in 2.22 s
[11:01:28.304] INFO  - Stopping stack
[11:01:28.304] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:01:28.305] DEBUG - In stopping. Going to disconnect all peers in peer table
[11:01:28.306] DEBUG - Handling event with type [STOP_EVENT]
[11:01:28.306] DEBUG - Not performing validation to message since validator is DISABLED.
[11:01:28.306] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[11:01:28.306] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[11:01:28.306] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[11:01:28.306] DEBUG - Send DPR message with Disconnect-Cause [0]
[11:01:28.307] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:01:28.307] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:28.307] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:28.308] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:01:28.308] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[11:01:28.308] DEBUG - Calling stopped() on PeerTableImpl
[11:01:28.309] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[11:01:28.309] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:28.309] DEBUG - No data received ?
[11:01:28.309] DEBUG - Passing message on to parent
[11:01:28.310] DEBUG - Received message of size [84]
[11:01:28.310] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:01:28.310] DEBUG - Got lock
[11:01:28.310] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:01:28.310] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:01:28.310] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[11:01:28.310] DEBUG - Handling event with type [DPA_EVENT]
[11:01:28.310] DEBUG - Not performing validation to message since validator is DISABLED.
[11:01:28.310] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:01:28.310] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:01:28.311] DEBUG - Finished passing message on to parent
[11:01:28.311] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[11:01:28.311] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:28.311] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[11:01:28.311] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:01:28.311] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:28.312] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:01:28.312] DEBUG - Got lock
[11:01:28.312] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:01:28.312] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[11:01:28.312] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[11:01:28.312] DEBUG - Handling event with type [DISCONNECT_EVENT]
[11:01:28.312] DEBUG - Not performing validation to message since validator is DISABLED.
[11:01:28.312] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:01:28.312] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:01:28.313] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:01:28.313] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:28.313] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[11:01:28.313] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:01:28.313] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:28.313] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:28.313] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:01:28.313] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54794]]
[11:01:28.314] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[11:01:28.314] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:01:28.314] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:01:28.314] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:01:28.314] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[11:01:28.314] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:01:28.314] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:01:28.315] DEBUG - Stopping ... [2] FSM threads are running
[11:01:28.409] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[11:01:28.409] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:01:28.409] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:01:28.409] DEBUG - Stopping ... [1] FSM threads are running
[11:01:28.415] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[11:01:28.415] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:01:28.415] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:01:28.415] DEBUG - Stopping ... [0] FSM threads are running
[11:01:28.559] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[11:01:28.560] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:01:28.560] INFO  - Destroying stack
[11:01:28.560] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[11:01:28.560] DEBUG - Calling destroy on router
[11:04:41.728] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[11:04:42.008] INFO  - Initiating stack
[11:04:42.010] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:04:42.260] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[11:04:42.261] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[11:04:42.261] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[11:04:42.261] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[11:04:42.262] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[11:04:42.295] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[11:04:42.295] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[11:04:42.297] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[11:04:42.297] DEBUG - Going to loop through configured realms and add them into a network map
[11:04:42.297] DEBUG - Getting config for realm [emblacom.com]
[11:04:42.298] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[11:04:42.298] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[11:04:42.306] DEBUG - Initializing Peer Table.
[11:04:42.307] DEBUG - Populating peerTable from configuration
[11:04:42.329] DEBUG - Maximum FSM Queue size is [10000]
[11:04:42.333] DEBUG - Initializing QueueStat @ Thread[main]
[11:04:42.333] DEBUG - Finished Initializing QueueStat @ Thread[main]
[11:04:42.335] DEBUG - Starting FSM Thread 1 of 3
[11:04:42.336] DEBUG - Starting FSM Thread 2 of 3
[11:04:42.336] DEBUG - Starting ... [1] FSM threads are running
[11:04:42.336] DEBUG - Starting FSM Thread 3 of 3
[11:04:42.336] DEBUG - Starting ... [2] FSM threads are running
[11:04:42.337] DEBUG - Starting ... [3] FSM threads are running
[11:04:42.363] DEBUG - Destination address is set to [testblade04] : [3868]
[11:04:42.363] DEBUG - Origin address is set to [0.0.0.0] : [0]
[11:04:42.364] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@6604ec21}] to peer table
[11:04:42.364] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:04:42.365] INFO  - Starting stack
[11:04:42.390] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[11:04:42.391] DEBUG - Handling event with type [START_EVENT]
[11:04:42.391] DEBUG - Not performing validation to message since validator is DISABLED.
[11:04:42.391] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:04:42.391] DEBUG - Calling start on the router
[11:04:42.391] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[11:04:42.392] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[11:04:42.401] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[11:04:42.412] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:04:42.412] DEBUG - Got lock
[11:04:42.413] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:04:42.413] DEBUG - Passing event to listener. Event type is [CONNECTED]
[11:04:42.414] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[11:04:42.414] DEBUG - Handling event with type [CONNECT_EVENT]
[11:04:42.414] DEBUG - Not performing validation to message since validator is DISABLED.
[11:04:42.414] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:04:42.414] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:04:42.414] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:04:42.415] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]
[11:04:42.415] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[11:04:42.415] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[11:04:42.415] DEBUG - Connected to peer aaa://172.16.133.122:3868
[11:04:42.415] DEBUG - Send CER message
[11:04:42.415] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[11:04:42.426] DEBUG - In getCommonApplications appIds size is [0]
[11:04:42.426] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[11:04:42.426] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[11:04:42.427] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:04:42.428] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:42.429] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:42.429] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:04:42.429] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[11:04:42.667] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[11:04:42.667] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:42.699] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:42.699] DEBUG - No data received ?
[11:04:42.700] DEBUG - Passing message on to parent
[11:04:42.700] DEBUG - Received message of size [276]
[11:04:42.700] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:04:42.700] DEBUG - Got lock
[11:04:42.700] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:04:42.700] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:04:42.701] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[11:04:42.701] DEBUG - Handling event with type [CEA_EVENT]
[11:04:42.701] DEBUG - Not performing validation to message since validator is DISABLED.
[11:04:42.701] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:04:42.702] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:04:42.702] DEBUG - Finished passing message on to parent
[11:04:42.702] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[11:04:42.703] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[11:04:42.703] DEBUG - In getCommonApplications appIds size is [1]
[11:04:42.704] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:04:42.704] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[11:04:42.705] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[11:04:42.709] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[11:04:42.712] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[11:04:42.718] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@3c5de5e6)
[11:04:42.719] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[11:04:42.720] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[11:04:42.723] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[11:04:42.723] INFO  - Parsing: scn/mms/msg/mms.msg
[11:04:42.789] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2571314753; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 11:04:42 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 11:04:42 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[11:04:42.797] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[11:04:42.798] DEBUG - In getSingleApplicationId for application id [4]
[11:04:42.798] DEBUG - Application Ids in this message are:
[11:04:42.798] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:04:42.798] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:04:42.799] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:04:42.799] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[11:04:42.799] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[11:04:42.799] DEBUG - In getSingleApplicationId for application id [4]
[11:04:42.799] DEBUG - Application Ids in this message are:
[11:04:42.800] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:04:42.800] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:04:42.800] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:04:42.800] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[11:04:42.800] DEBUG - Looping through peers in realm [emblacom.com]
[11:04:42.801] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[11:04:42.801] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[11:04:42.801] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@6604ec21}] for name [172.16.133.122]
[11:04:42.801] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[11:04:42.801] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@6604ec21}]] from list [[172.16.133.122]]
[11:04:42.802] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[11:04:42.802] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@6604ec21}] for sending message [MessageImpl{commandCode=272, flags=128}]
[11:04:42.802] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@6604ec21}]
[11:04:42.802] DEBUG - Handling event with type [SEND_MSG_EVENT]
[11:04:42.803] DEBUG - Not performing validation to message since validator is DISABLED.
[11:04:42.803] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[11:04:42.803] DEBUG - Message was submitted to be sent, now adding statistics
[11:04:42.822] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[11:04:42.843] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[11:04:42.844] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:04:42.845] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:42.846] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:42.846] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:04:42.894] DEBUG - Just read [744] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:42.895] DEBUG - No data received ?
[11:04:42.895] DEBUG - Passing message on to parent
[11:04:42.895] DEBUG - Received message of size [744]
[11:04:42.895] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:04:42.895] DEBUG - Got lock
[11:04:42.895] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:04:42.895] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:04:42.895] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[11:04:42.895] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[11:04:42.895] DEBUG - Not performing validation to message since validator is DISABLED.
[11:04:42.896] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:04:42.896] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:04:42.896] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[11:04:42.896] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[11:04:42.896] DEBUG - Finished passing message on to parent
[11:04:42.896] DEBUG - Receiving message in client.
[11:04:42.896] DEBUG - Message is an answer
[11:04:42.897] DEBUG - Normal return from message sent, probably no answer 94ms
[11:04:42.897] INFO  - Answer received: NULL
[11:04:42.898] INFO  - WAITING 2000ms
[11:04:44.899] INFO  - Scenario executed in 2.193 s
[11:04:44.899] INFO  - Stopping stack
[11:04:44.899] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:04:44.901] DEBUG - In stopping. Going to disconnect all peers in peer table
[11:04:44.901] DEBUG - Handling event with type [STOP_EVENT]
[11:04:44.901] DEBUG - Not performing validation to message since validator is DISABLED.
[11:04:44.901] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[11:04:44.902] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[11:04:44.902] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[11:04:44.902] DEBUG - Send DPR message with Disconnect-Cause [0]
[11:04:44.902] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:04:44.902] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:44.903] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:44.903] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:04:44.903] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[11:04:44.904] DEBUG - Calling stopped() on PeerTableImpl
[11:04:44.904] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[11:04:44.905] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:44.905] DEBUG - No data received ?
[11:04:44.905] DEBUG - Passing message on to parent
[11:04:44.905] DEBUG - Received message of size [84]
[11:04:44.905] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:04:44.905] DEBUG - Got lock
[11:04:44.905] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:04:44.906] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:04:44.906] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[11:04:44.906] DEBUG - Handling event with type [DPA_EVENT]
[11:04:44.906] DEBUG - Not performing validation to message since validator is DISABLED.
[11:04:44.906] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:04:44.906] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:04:44.906] DEBUG - Finished passing message on to parent
[11:04:44.906] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[11:04:44.906] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:44.906] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[11:04:44.907] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:04:44.907] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:44.907] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:04:44.907] DEBUG - Got lock
[11:04:44.908] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:04:44.908] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[11:04:44.908] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[11:04:44.908] DEBUG - Handling event with type [DISCONNECT_EVENT]
[11:04:44.908] DEBUG - Not performing validation to message since validator is DISABLED.
[11:04:44.908] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:04:44.908] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:04:44.909] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:04:44.909] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:44.909] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[11:04:44.909] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:04:44.909] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:44.909] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:44.909] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:04:44.909] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54808]]
[11:04:44.909] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[11:04:44.909] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:04:44.910] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:04:44.910] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:04:44.910] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[11:04:44.910] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:04:44.910] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:04:44.910] DEBUG - Stopping ... [2] FSM threads are running
[11:04:45.004] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[11:04:45.004] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:04:45.004] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:04:45.004] DEBUG - Stopping ... [1] FSM threads are running
[11:04:45.011] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[11:04:45.011] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:04:45.011] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:04:45.011] DEBUG - Stopping ... [0] FSM threads are running
[11:04:45.154] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[11:04:45.155] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:04:45.155] INFO  - Destroying stack
[11:04:45.155] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[11:04:45.155] DEBUG - Calling destroy on router
[11:06:59.054] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[11:06:59.302] INFO  - Initiating stack
[11:06:59.305] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:06:59.531] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[11:06:59.532] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[11:06:59.532] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[11:06:59.532] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[11:06:59.533] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[11:06:59.564] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[11:06:59.564] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[11:06:59.566] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[11:06:59.566] DEBUG - Going to loop through configured realms and add them into a network map
[11:06:59.567] DEBUG - Getting config for realm [emblacom.com]
[11:06:59.567] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[11:06:59.567] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[11:06:59.576] DEBUG - Initializing Peer Table.
[11:06:59.576] DEBUG - Populating peerTable from configuration
[11:06:59.599] DEBUG - Maximum FSM Queue size is [10000]
[11:06:59.603] DEBUG - Initializing QueueStat @ Thread[main]
[11:06:59.604] DEBUG - Finished Initializing QueueStat @ Thread[main]
[11:06:59.606] DEBUG - Starting FSM Thread 1 of 3
[11:06:59.606] DEBUG - Starting FSM Thread 2 of 3
[11:06:59.607] DEBUG - Starting ... [1] FSM threads are running
[11:06:59.607] DEBUG - Starting FSM Thread 3 of 3
[11:06:59.607] DEBUG - Starting ... [2] FSM threads are running
[11:06:59.607] DEBUG - Starting ... [3] FSM threads are running
[11:06:59.635] DEBUG - Destination address is set to [testblade04] : [3868]
[11:06:59.635] DEBUG - Origin address is set to [0.0.0.0] : [0]
[11:06:59.636] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}] to peer table
[11:06:59.637] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:06:59.638] INFO  - Starting stack
[11:06:59.668] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[11:06:59.668] DEBUG - Handling event with type [START_EVENT]
[11:06:59.669] DEBUG - Not performing validation to message since validator is DISABLED.
[11:06:59.669] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:06:59.669] DEBUG - Calling start on the router
[11:06:59.669] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[11:06:59.670] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[11:06:59.680] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[11:06:59.694] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:06:59.694] DEBUG - Got lock
[11:06:59.694] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:06:59.695] DEBUG - Passing event to listener. Event type is [CONNECTED]
[11:06:59.696] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[11:06:59.696] DEBUG - Handling event with type [CONNECT_EVENT]
[11:06:59.696] DEBUG - Not performing validation to message since validator is DISABLED.
[11:06:59.696] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:06:59.696] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:06:59.697] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:06:59.697] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]
[11:06:59.697] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[11:06:59.697] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[11:06:59.697] DEBUG - Connected to peer aaa://172.16.133.122:3868
[11:06:59.697] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[11:06:59.698] DEBUG - Send CER message
[11:06:59.709] DEBUG - In getCommonApplications appIds size is [0]
[11:06:59.709] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[11:06:59.709] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[11:06:59.710] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:06:59.711] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:06:59.712] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:06:59.712] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:06:59.713] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[11:06:59.948] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[11:06:59.948] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:06:59.975] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:06:59.975] DEBUG - No data received ?
[11:06:59.975] DEBUG - Passing message on to parent
[11:06:59.975] DEBUG - Received message of size [276]
[11:06:59.976] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:06:59.976] DEBUG - Got lock
[11:06:59.976] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:06:59.976] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:06:59.977] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[11:06:59.977] DEBUG - Handling event with type [CEA_EVENT]
[11:06:59.977] DEBUG - Not performing validation to message since validator is DISABLED.
[11:06:59.977] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:06:59.977] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:06:59.977] DEBUG - Finished passing message on to parent
[11:06:59.977] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[11:06:59.978] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[11:06:59.978] DEBUG - In getCommonApplications appIds size is [1]
[11:06:59.979] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:06:59.980] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[11:06:59.981] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[11:06:59.986] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[11:06:59.989] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[11:06:59.994] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@38a07e00)
[11:06:59.996] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[11:06:59.996] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[11:07:00.000] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[11:07:00.001] INFO  - Parsing: scn/mms/msg/mms.msg
[11:07:00.065] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2571452046; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 11:07:00 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 11:07:00 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[11:07:00.072] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[11:07:00.073] DEBUG - In getSingleApplicationId for application id [4]
[11:07:00.073] DEBUG - Application Ids in this message are:
[11:07:00.073] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:07:00.073] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:07:00.074] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:07:00.074] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[11:07:00.075] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[11:07:00.075] DEBUG - In getSingleApplicationId for application id [4]
[11:07:00.075] DEBUG - Application Ids in this message are:
[11:07:00.075] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:07:00.075] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:07:00.075] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:07:00.076] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[11:07:00.076] DEBUG - Looping through peers in realm [emblacom.com]
[11:07:00.076] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[11:07:00.076] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[11:07:00.076] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}] for name [172.16.133.122]
[11:07:00.077] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[11:07:00.077] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}]] from list [[172.16.133.122]]
[11:07:00.077] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[11:07:00.077] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}] for sending message [MessageImpl{commandCode=272, flags=128}]
[11:07:00.078] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}]
[11:07:00.078] DEBUG - Handling event with type [SEND_MSG_EVENT]
[11:07:00.078] DEBUG - Not performing validation to message since validator is DISABLED.
[11:07:00.078] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[11:07:00.078] DEBUG - Message was submitted to be sent, now adding statistics
[11:07:00.102] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[11:07:00.124] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[11:07:00.124] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:07:00.125] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:07:00.126] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:07:00.126] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:07:00.172] DEBUG - Just read [744] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:07:00.173] DEBUG - No data received ?
[11:07:00.173] DEBUG - Passing message on to parent
[11:07:00.173] DEBUG - Received message of size [744]
[11:07:00.173] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:07:00.173] DEBUG - Got lock
[11:07:00.173] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:07:00.173] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:07:00.173] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[11:07:00.174] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[11:07:00.174] DEBUG - Not performing validation to message since validator is DISABLED.
[11:07:00.174] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:07:00.174] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:07:00.174] DEBUG - Finished passing message on to parent
[11:07:00.174] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[11:07:00.174] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[11:07:00.175] DEBUG - Receiving message in client.
[11:07:00.175] DEBUG - Message is an answer
[11:07:00.175] DEBUG - Normal return from message sent, probably no answer 96ms
[11:07:00.176] INFO  - Answer received: NULL
[11:07:00.176] INFO  - WAITING 2000ms
[11:07:02.178] INFO  - Scenario executed in 2.195 s
[11:07:02.178] INFO  - Stopping stack
[11:07:02.178] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:07:02.179] DEBUG - In stopping. Going to disconnect all peers in peer table
[11:07:02.179] DEBUG - Handling event with type [STOP_EVENT]
[11:07:02.179] DEBUG - Not performing validation to message since validator is DISABLED.
[11:07:02.180] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[11:07:02.180] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[11:07:02.180] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[11:07:02.180] DEBUG - Send DPR message with Disconnect-Cause [0]
[11:07:02.181] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:07:02.181] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:07:02.181] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:07:02.181] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:07:02.182] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[11:07:02.182] DEBUG - Calling stopped() on PeerTableImpl
[11:07:02.182] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[11:07:02.183] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:07:02.183] DEBUG - No data received ?
[11:07:02.183] DEBUG - Passing message on to parent
[11:07:02.184] DEBUG - Received message of size [84]
[11:07:02.184] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:07:02.184] DEBUG - Got lock
[11:07:02.184] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:07:02.184] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:07:02.184] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[11:07:02.184] DEBUG - Handling event with type [DPA_EVENT]
[11:07:02.184] DEBUG - Not performing validation to message since validator is DISABLED.
[11:07:02.185] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:07:02.185] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:07:02.185] DEBUG - Finished passing message on to parent
[11:07:02.185] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[11:07:02.185] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:07:02.185] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[11:07:02.185] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:07:02.185] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:07:02.186] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:07:02.186] DEBUG - Got lock
[11:07:02.186] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:07:02.186] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[11:07:02.186] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[11:07:02.186] DEBUG - Handling event with type [DISCONNECT_EVENT]
[11:07:02.187] DEBUG - Not performing validation to message since validator is DISABLED.
[11:07:02.187] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:07:02.187] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:07:02.187] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:07:02.187] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:07:02.187] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[11:07:02.187] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:07:02.187] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:07:02.188] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:07:02.188] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:07:02.188] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=54824]]
[11:07:02.188] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[11:07:02.188] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:07:02.188] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:07:02.189] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:07:02.189] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[11:07:02.189] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:07:02.189] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:07:02.189] DEBUG - Stopping ... [2] FSM threads are running
[11:07:02.283] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[11:07:02.283] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:07:02.283] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:07:02.283] DEBUG - Stopping ... [1] FSM threads are running
[11:07:02.289] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[11:07:02.289] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:07:02.289] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:07:02.289] DEBUG - Stopping ... [0] FSM threads are running
[11:07:02.432] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[11:07:02.433] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:07:02.433] INFO  - Destroying stack
[11:07:02.433] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[11:07:02.433] DEBUG - Calling destroy on router
[11:31:55.851] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[11:31:56.255] INFO  - Initiating stack
[11:31:56.259] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:31:56.540] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[11:31:56.541] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[11:31:56.541] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[11:31:56.541] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[11:31:56.542] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[11:31:56.597] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[11:31:56.597] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[11:31:56.599] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[11:31:56.600] DEBUG - Going to loop through configured realms and add them into a network map
[11:31:56.600] DEBUG - Getting config for realm [emblacom.com]
[11:31:56.600] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[11:31:56.601] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[11:31:56.611] DEBUG - Initializing Peer Table.
[11:31:56.612] DEBUG - Populating peerTable from configuration
[11:31:56.641] DEBUG - Maximum FSM Queue size is [10000]
[11:31:56.646] DEBUG - Initializing QueueStat @ Thread[main]
[11:31:56.646] DEBUG - Finished Initializing QueueStat @ Thread[main]
[11:31:56.648] DEBUG - Starting FSM Thread 1 of 3
[11:31:56.649] DEBUG - Starting FSM Thread 2 of 3
[11:31:56.649] DEBUG - Starting ... [1] FSM threads are running
[11:31:56.649] DEBUG - Starting FSM Thread 3 of 3
[11:31:56.649] DEBUG - Starting ... [2] FSM threads are running
[11:31:56.650] DEBUG - Starting ... [3] FSM threads are running
[11:31:56.718] DEBUG - Destination address is set to [testblade04] : [3868]
[11:31:56.718] DEBUG - Origin address is set to [0.0.0.0] : [0]
[11:31:56.719] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] to peer table
[11:31:56.719] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:31:56.720] INFO  - Starting stack
[11:31:56.742] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[11:31:56.742] DEBUG - Handling event with type [START_EVENT]
[11:31:56.742] DEBUG - Not performing validation to message since validator is DISABLED.
[11:31:56.743] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:31:56.743] DEBUG - Calling start on the router
[11:31:56.743] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[11:31:56.743] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[11:31:56.753] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[11:31:56.775] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:31:56.775] DEBUG - Got lock
[11:31:56.776] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:31:56.776] DEBUG - Passing event to listener. Event type is [CONNECTED]
[11:31:56.777] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[11:31:56.777] DEBUG - Handling event with type [CONNECT_EVENT]
[11:31:56.777] DEBUG - Not performing validation to message since validator is DISABLED.
[11:31:56.777] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:31:56.777] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:31:56.778] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:31:56.778] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]
[11:31:56.778] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[11:31:56.778] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[11:31:56.778] DEBUG - Connected to peer aaa://172.16.133.122:3868
[11:31:56.778] DEBUG - Send CER message
[11:31:56.778] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[11:31:56.790] DEBUG - In getCommonApplications appIds size is [0]
[11:31:56.790] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[11:31:56.790] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[11:31:56.791] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:31:56.791] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:56.794] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:56.794] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:31:56.794] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[11:31:57.028] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[11:31:57.028] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:57.082] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:57.082] DEBUG - No data received ?
[11:31:57.082] DEBUG - Passing message on to parent
[11:31:57.082] DEBUG - Received message of size [276]
[11:31:57.083] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:31:57.083] DEBUG - Got lock
[11:31:57.083] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:31:57.083] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:31:57.084] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[11:31:57.084] DEBUG - Handling event with type [CEA_EVENT]
[11:31:57.084] DEBUG - Not performing validation to message since validator is DISABLED.
[11:31:57.084] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:31:57.084] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:31:57.085] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[11:31:57.085] DEBUG - Finished passing message on to parent
[11:31:57.085] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[11:31:57.086] DEBUG - In getCommonApplications appIds size is [1]
[11:31:57.086] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:31:57.087] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[11:31:57.087] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[11:31:57.093] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[11:31:57.097] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[11:31:57.103] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@7157426)
[11:31:57.105] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[11:31:57.105] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[11:31:57.109] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[11:31:57.109] INFO  - Parsing: scn/mms/msg/mms.msg
[11:31:57.235] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2572949041; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 11:31:57 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 11:31:57 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[11:31:57.248] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[11:31:57.249] DEBUG - In getSingleApplicationId for application id [4]
[11:31:57.249] DEBUG - Application Ids in this message are:
[11:31:57.249] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:31:57.249] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:31:57.250] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:31:57.250] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[11:31:57.250] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[11:31:57.250] DEBUG - In getSingleApplicationId for application id [4]
[11:31:57.250] DEBUG - Application Ids in this message are:
[11:31:57.251] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:31:57.251] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:31:57.251] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:31:57.251] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[11:31:57.251] DEBUG - Looping through peers in realm [emblacom.com]
[11:31:57.251] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[11:31:57.252] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[11:31:57.252] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] for name [172.16.133.122]
[11:31:57.252] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[11:31:57.252] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}]] from list [[172.16.133.122]]
[11:31:57.252] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[11:31:57.253] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}] for sending message [MessageImpl{commandCode=272, flags=128}]
[11:31:57.253] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@417f69df}]
[11:31:57.254] DEBUG - Handling event with type [SEND_MSG_EVENT]
[11:31:57.254] DEBUG - Not performing validation to message since validator is DISABLED.
[11:31:57.254] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[11:31:57.254] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[11:31:57.254] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[11:31:57.255] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:31:57.256] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:57.256] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:57.256] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:31:57.257] DEBUG - Message was submitted to be sent, now adding statistics
[11:31:57.318] DEBUG - Just read [744] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:57.319] DEBUG - No data received ?
[11:31:57.319] DEBUG - Passing message on to parent
[11:31:57.319] DEBUG - Received message of size [744]
[11:31:57.319] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:31:57.319] DEBUG - Got lock
[11:31:57.319] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:31:57.319] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:31:57.320] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[11:31:57.320] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[11:31:57.320] DEBUG - Not performing validation to message since validator is DISABLED.
[11:31:57.320] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:31:57.320] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:31:57.320] DEBUG - Finished passing message on to parent
[11:31:57.320] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[11:31:57.321] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[11:31:57.321] DEBUG - Receiving message in client.
[11:31:57.321] DEBUG - Message is an answer
[11:31:57.322] DEBUG - Normal return from message sent, probably no answer 65ms
[11:31:57.322] INFO  - Answer received: NULL
[11:31:57.322] INFO  - WAITING 2000ms
[11:31:59.323] INFO  - Scenario executed in 2.234 s
[11:31:59.323] INFO  - Stopping stack
[11:31:59.323] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:31:59.324] DEBUG - In stopping. Going to disconnect all peers in peer table
[11:31:59.324] DEBUG - Handling event with type [STOP_EVENT]
[11:31:59.325] DEBUG - Not performing validation to message since validator is DISABLED.
[11:31:59.325] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[11:31:59.325] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[11:31:59.325] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[11:31:59.325] DEBUG - Send DPR message with Disconnect-Cause [0]
[11:31:59.326] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:31:59.326] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:59.326] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:59.326] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:31:59.328] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[11:31:59.328] DEBUG - Calling stopped() on PeerTableImpl
[11:31:59.328] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[11:31:59.330] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:59.330] DEBUG - No data received ?
[11:31:59.330] DEBUG - Passing message on to parent
[11:31:59.330] DEBUG - Received message of size [84]
[11:31:59.330] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:31:59.331] DEBUG - Got lock
[11:31:59.331] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:31:59.331] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:31:59.331] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[11:31:59.331] DEBUG - Handling event with type [DPA_EVENT]
[11:31:59.331] DEBUG - Not performing validation to message since validator is DISABLED.
[11:31:59.331] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:31:59.331] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:31:59.331] DEBUG - Finished passing message on to parent
[11:31:59.331] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[11:31:59.332] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:59.332] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[11:31:59.332] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:31:59.332] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:59.333] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:31:59.333] DEBUG - Got lock
[11:31:59.333] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:31:59.333] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[11:31:59.333] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[11:31:59.333] DEBUG - Handling event with type [DISCONNECT_EVENT]
[11:31:59.333] DEBUG - Not performing validation to message since validator is DISABLED.
[11:31:59.333] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:31:59.334] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:31:59.334] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:31:59.334] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[11:31:59.334] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:31:59.334] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:59.334] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:59.335] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:59.335] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52968]]
[11:31:59.336] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:31:59.336] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:31:59.336] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[11:31:59.336] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:31:59.337] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:31:59.337] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[11:31:59.337] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:31:59.337] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:31:59.337] DEBUG - Stopping ... [2] FSM threads are running
[11:31:59.429] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[11:31:59.429] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:31:59.429] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:31:59.429] DEBUG - Stopping ... [1] FSM threads are running
[11:31:59.437] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[11:31:59.437] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:31:59.437] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:31:59.437] DEBUG - Stopping ... [0] FSM threads are running
[11:31:59.578] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[11:31:59.579] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:31:59.579] INFO  - Destroying stack
[11:31:59.580] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[11:31:59.580] DEBUG - Calling destroy on router
[11:35:40.241] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[11:35:40.516] INFO  - Initiating stack
[11:35:40.520] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:35:40.762] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[11:35:40.763] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[11:35:40.763] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[11:35:40.764] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[11:35:40.764] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[11:35:40.798] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[11:35:40.798] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[11:35:40.800] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[11:35:40.801] DEBUG - Going to loop through configured realms and add them into a network map
[11:35:40.801] DEBUG - Getting config for realm [emblacom.com]
[11:35:40.801] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[11:35:40.802] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[11:35:40.811] DEBUG - Initializing Peer Table.
[11:35:40.811] DEBUG - Populating peerTable from configuration
[11:35:40.834] DEBUG - Maximum FSM Queue size is [10000]
[11:35:40.837] DEBUG - Initializing QueueStat @ Thread[main]
[11:35:40.838] DEBUG - Finished Initializing QueueStat @ Thread[main]
[11:35:40.839] DEBUG - Starting FSM Thread 1 of 3
[11:35:40.840] DEBUG - Starting FSM Thread 2 of 3
[11:35:40.840] DEBUG - Starting ... [1] FSM threads are running
[11:35:40.840] DEBUG - Starting FSM Thread 3 of 3
[11:35:40.840] DEBUG - Starting ... [2] FSM threads are running
[11:35:40.841] DEBUG - Starting ... [3] FSM threads are running
[11:35:40.866] DEBUG - Destination address is set to [testblade04] : [3868]
[11:35:40.866] DEBUG - Origin address is set to [0.0.0.0] : [0]
[11:35:40.867] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] to peer table
[11:35:40.867] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:35:40.868] INFO  - Starting stack
[11:35:40.891] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[11:35:40.892] DEBUG - Handling event with type [START_EVENT]
[11:35:40.892] DEBUG - Not performing validation to message since validator is DISABLED.
[11:35:40.892] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:35:40.892] DEBUG - Calling start on the router
[11:35:40.893] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[11:35:40.893] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[11:35:40.902] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[11:35:40.914] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:35:40.914] DEBUG - Got lock
[11:35:40.914] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:35:40.914] DEBUG - Passing event to listener. Event type is [CONNECTED]
[11:35:40.915] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[11:35:40.916] DEBUG - Handling event with type [CONNECT_EVENT]
[11:35:40.916] DEBUG - Not performing validation to message since validator is DISABLED.
[11:35:40.916] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:35:40.916] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:35:40.916] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:35:40.916] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]
[11:35:40.916] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[11:35:40.917] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[11:35:40.917] DEBUG - Connected to peer aaa://172.16.133.122:3868
[11:35:40.917] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[11:35:40.917] DEBUG - Send CER message
[11:35:40.928] DEBUG - In getCommonApplications appIds size is [0]
[11:35:40.928] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[11:35:40.928] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[11:35:40.929] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:35:40.930] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:35:40.931] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:35:40.931] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:35:40.931] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[11:35:41.167] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[11:35:41.167] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:35:41.194] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:35:41.194] DEBUG - No data received ?
[11:35:41.195] DEBUG - Passing message on to parent
[11:35:41.195] DEBUG - Received message of size [276]
[11:35:41.195] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:35:41.195] DEBUG - Got lock
[11:35:41.195] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:35:41.195] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:35:41.196] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[11:35:41.196] DEBUG - Handling event with type [CEA_EVENT]
[11:35:41.196] DEBUG - Not performing validation to message since validator is DISABLED.
[11:35:41.197] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:35:41.197] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:35:41.197] DEBUG - Finished passing message on to parent
[11:35:41.197] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[11:35:41.197] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[11:35:41.198] DEBUG - In getCommonApplications appIds size is [1]
[11:35:41.199] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:35:41.199] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[11:35:41.200] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[11:35:41.205] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[11:35:41.207] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[11:35:41.213] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@30b04f0b)
[11:35:41.214] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[11:35:41.214] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[11:35:41.219] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[11:35:41.219] INFO  - Parsing: scn/mms/msg/mms.msg
[11:35:41.284] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2573173266; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 11:35:41 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 11:35:41 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[11:35:41.293] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[11:35:41.293] DEBUG - In getSingleApplicationId for application id [4]
[11:35:41.293] DEBUG - Application Ids in this message are:
[11:35:41.294] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:35:41.294] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:35:41.294] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:35:41.294] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[11:35:41.294] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[11:35:41.295] DEBUG - In getSingleApplicationId for application id [4]
[11:35:41.295] DEBUG - Application Ids in this message are:
[11:35:41.295] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:35:41.295] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:35:41.295] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:35:41.295] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[11:35:41.296] DEBUG - Looping through peers in realm [emblacom.com]
[11:35:41.296] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[11:35:41.296] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[11:35:41.297] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] for name [172.16.133.122]
[11:35:41.297] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[11:35:41.297] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}]] from list [[172.16.133.122]]
[11:35:41.297] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[11:35:41.297] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] for sending message [MessageImpl{commandCode=272, flags=128}]
[11:35:41.298] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}]
[11:35:41.298] DEBUG - Handling event with type [SEND_MSG_EVENT]
[11:35:41.298] DEBUG - Not performing validation to message since validator is DISABLED.
[11:35:41.298] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[11:35:41.298] DEBUG - Message was submitted to be sent, now adding statistics
[11:35:41.321] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[11:35:41.321] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[11:35:41.322] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:35:41.323] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:35:41.323] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:35:41.323] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:35:41.367] DEBUG - Just read [744] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:35:41.368] DEBUG - No data received ?
[11:35:41.368] DEBUG - Passing message on to parent
[11:35:41.368] DEBUG - Received message of size [744]
[11:35:41.368] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:35:41.368] DEBUG - Got lock
[11:35:41.368] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:35:41.369] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:35:41.369] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[11:35:41.369] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[11:35:41.369] DEBUG - Not performing validation to message since validator is DISABLED.
[11:35:41.369] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:35:41.369] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:35:41.370] DEBUG - Finished passing message on to parent
[11:35:41.370] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[11:35:41.370] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[11:35:41.370] DEBUG - Receiving message in client.
[11:35:41.370] DEBUG - Message is an answer
[11:36:09.374] DEBUG - Sending timeout event
[11:36:09.374] DEBUG - Handling event with type [TIMEOUT_EVENT]
[11:36:09.374] DEBUG - Not performing validation to message since validator is DISABLED.
[11:36:09.374] DEBUG - Placing event [Event{name:TIMEOUT_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:36:09.374] DEBUG - Got Event [Event{name:TIMEOUT_EVENT, key:null, object:null}] from Queue
[11:36:09.375] DEBUG - Process event [Event{name:TIMEOUT_EVENT, key:null, object:null}]. Peer State is [OKAY]
[11:36:09.375] DEBUG - Send DWR message
[11:36:09.375] DEBUG - Calling connection to send message [MessageImpl{commandCode=280, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:36:09.375] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:36:09.376] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:36:09.376] DEBUG - Connection sent message [MessageImpl{commandCode=280, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:36:09.378] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:36:09.378] DEBUG - No data received ?
[11:36:09.378] DEBUG - Passing message on to parent
[11:36:09.378] DEBUG - Received message of size [84]
[11:36:09.378] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:36:09.378] DEBUG - Got lock
[11:36:09.379] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:36:09.379] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:36:09.379] DEBUG - Receive message type [280] to peer [aaa://testblade04:3868]
[11:36:09.379] DEBUG - Handling event with type [DWA_EVENT]
[11:36:09.379] DEBUG - Not performing validation to message since validator is DISABLED.
[11:36:09.379] DEBUG - Placing event [Event{name:DWA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=280, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:36:09.379] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:36:09.379] DEBUG - Finished passing message on to parent
[11:36:09.379] DEBUG - Got Event [Event{name:DWA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=280, flags=0}}] from Queue
[11:36:09.379] DEBUG - Process event [Event{name:DWA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=280, flags=0}}]. Peer State is [OKAY]
[11:36:11.372] DEBUG - Normal return from message sent, probably no answer 30073ms
[11:36:11.372] INFO  - Answer received: NULL
[11:36:11.372] INFO  - WAITING 2000ms
[11:36:13.373] INFO  - Scenario executed in 32.172 s
[11:36:13.373] INFO  - Stopping stack
[11:36:13.373] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:36:13.374] DEBUG - In stopping. Going to disconnect all peers in peer table
[11:36:13.374] DEBUG - Handling event with type [STOP_EVENT]
[11:36:13.374] DEBUG - Not performing validation to message since validator is DISABLED.
[11:36:13.375] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[11:36:13.375] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[11:36:13.375] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[11:36:13.375] DEBUG - Send DPR message with Disconnect-Cause [0]
[11:36:13.376] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:36:13.376] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:36:13.376] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:36:13.377] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:36:13.377] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[11:36:13.377] DEBUG - Calling stopped() on PeerTableImpl
[11:36:13.377] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[11:36:13.378] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:36:13.378] DEBUG - No data received ?
[11:36:13.378] DEBUG - Passing message on to parent
[11:36:13.379] DEBUG - Received message of size [84]
[11:36:13.379] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:36:13.379] DEBUG - Got lock
[11:36:13.379] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:36:13.379] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:36:13.379] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[11:36:13.379] DEBUG - Handling event with type [DPA_EVENT]
[11:36:13.379] DEBUG - Not performing validation to message since validator is DISABLED.
[11:36:13.379] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:36:13.379] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:36:13.379] DEBUG - Finished passing message on to parent
[11:36:13.380] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[11:36:13.380] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:36:13.380] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[11:36:13.380] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:36:13.380] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:36:13.381] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:36:13.381] DEBUG - Got lock
[11:36:13.381] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:36:13.381] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[11:36:13.381] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[11:36:13.381] DEBUG - Handling event with type [DISCONNECT_EVENT]
[11:36:13.381] DEBUG - Not performing validation to message since validator is DISABLED.
[11:36:13.382] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:36:13.382] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:36:13.382] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:36:13.382] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:36:13.382] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[11:36:13.382] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:36:13.383] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:36:13.383] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:36:13.383] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[11:36:13.384] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:36:13.384] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:36:13.384] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[11:36:13.384] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:36:13.384] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:36:13.384] DEBUG - Stopping ... [2] FSM threads are running
[11:36:13.385] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:36:13.385] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52973]]
[11:36:13.385] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:36:13.385] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[11:36:13.385] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:36:13.385] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:36:13.385] DEBUG - Stopping ... [1] FSM threads are running
[11:36:13.478] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[11:36:13.478] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:36:13.478] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:36:13.478] DEBUG - Stopping ... [0] FSM threads are running
[11:36:13.628] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[11:36:13.629] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:36:13.629] INFO  - Destroying stack
[11:36:13.629] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[11:36:13.629] DEBUG - Calling destroy on router
[11:41:25.755] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[11:41:26.016] INFO  - Initiating stack
[11:41:26.019] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:41:26.295] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[11:41:26.295] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[11:41:26.296] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[11:41:26.296] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[11:41:26.296] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[11:41:26.331] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[11:41:26.331] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[11:41:26.334] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[11:41:26.334] DEBUG - Going to loop through configured realms and add them into a network map
[11:41:26.334] DEBUG - Getting config for realm [emblacom.com]
[11:41:26.335] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[11:41:26.336] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[11:41:26.345] DEBUG - Initializing Peer Table.
[11:41:26.346] DEBUG - Populating peerTable from configuration
[11:41:26.369] DEBUG - Maximum FSM Queue size is [10000]
[11:41:26.374] DEBUG - Initializing QueueStat @ Thread[main]
[11:41:26.374] DEBUG - Finished Initializing QueueStat @ Thread[main]
[11:41:26.376] DEBUG - Starting FSM Thread 1 of 3
[11:41:26.377] DEBUG - Starting FSM Thread 2 of 3
[11:41:26.377] DEBUG - Starting ... [1] FSM threads are running
[11:41:26.377] DEBUG - Starting FSM Thread 3 of 3
[11:41:26.377] DEBUG - Starting ... [2] FSM threads are running
[11:41:26.378] DEBUG - Starting ... [3] FSM threads are running
[11:41:26.408] DEBUG - Destination address is set to [testblade04] : [3868]
[11:41:26.409] DEBUG - Origin address is set to [0.0.0.0] : [0]
[11:41:26.409] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}] to peer table
[11:41:26.410] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:41:26.411] INFO  - Starting stack
[11:41:26.436] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[11:41:26.436] DEBUG - Handling event with type [START_EVENT]
[11:41:26.437] DEBUG - Not performing validation to message since validator is DISABLED.
[11:41:26.437] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:41:26.437] DEBUG - Calling start on the router
[11:41:26.437] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[11:41:26.438] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[11:41:26.447] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[11:41:26.459] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:41:26.459] DEBUG - Got lock
[11:41:26.459] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:41:26.459] DEBUG - Passing event to listener. Event type is [CONNECTED]
[11:41:26.461] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[11:41:26.461] DEBUG - Handling event with type [CONNECT_EVENT]
[11:41:26.461] DEBUG - Not performing validation to message since validator is DISABLED.
[11:41:26.461] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:41:26.461] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:41:26.461] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:41:26.462] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]
[11:41:26.462] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[11:41:26.462] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[11:41:26.462] DEBUG - Connected to peer aaa://172.16.133.122:3868
[11:41:26.463] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[11:41:26.463] DEBUG - Send CER message
[11:41:26.474] DEBUG - In getCommonApplications appIds size is [0]
[11:41:26.474] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[11:41:26.474] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[11:41:26.475] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:41:26.476] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:26.477] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:26.477] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:41:26.478] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[11:41:26.713] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[11:41:26.713] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:26.739] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:26.739] DEBUG - No data received ?
[11:41:26.740] DEBUG - Passing message on to parent
[11:41:26.740] DEBUG - Received message of size [276]
[11:41:26.740] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:41:26.740] DEBUG - Got lock
[11:41:26.740] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:41:26.740] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:41:26.741] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[11:41:26.741] DEBUG - Handling event with type [CEA_EVENT]
[11:41:26.741] DEBUG - Not performing validation to message since validator is DISABLED.
[11:41:26.741] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:41:26.742] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:41:26.742] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[11:41:26.742] DEBUG - Finished passing message on to parent
[11:41:26.742] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[11:41:26.743] DEBUG - In getCommonApplications appIds size is [1]
[11:41:26.744] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:41:26.744] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[11:41:26.744] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[11:41:26.749] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[11:41:26.752] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[11:41:26.757] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@38a07e00)
[11:41:26.759] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[11:41:26.760] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[11:41:26.763] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[11:41:26.763] INFO  - Parsing: scn/mms/msg/mms.msg
[11:41:26.832] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2573518795; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 11:41:26 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 11:41:26 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[11:41:26.840] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[11:41:26.841] DEBUG - In getSingleApplicationId for application id [4]
[11:41:26.841] DEBUG - Application Ids in this message are:
[11:41:26.841] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:41:26.841] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:41:26.841] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:41:26.842] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[11:41:26.842] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[11:41:26.842] DEBUG - In getSingleApplicationId for application id [4]
[11:41:26.842] DEBUG - Application Ids in this message are:
[11:41:26.842] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:41:26.843] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:41:26.843] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:41:26.843] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[11:41:26.843] DEBUG - Looping through peers in realm [emblacom.com]
[11:41:26.843] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[11:41:26.844] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[11:41:26.844] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}] for name [172.16.133.122]
[11:41:26.844] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[11:41:26.844] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}]] from list [[172.16.133.122]]
[11:41:26.844] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[11:41:26.845] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}] for sending message [MessageImpl{commandCode=272, flags=128}]
[11:41:26.845] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}]
[11:41:26.845] DEBUG - Handling event with type [SEND_MSG_EVENT]
[11:41:26.845] DEBUG - Not performing validation to message since validator is DISABLED.
[11:41:26.845] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[11:41:26.846] DEBUG - Message was submitted to be sent, now adding statistics
[11:41:26.862] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[11:41:26.863] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[11:41:26.863] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:41:26.864] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:26.865] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:26.865] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:41:26.920] DEBUG - Just read [744] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:26.921] DEBUG - No data received ?
[11:41:26.921] DEBUG - Passing message on to parent
[11:41:26.921] DEBUG - Received message of size [744]
[11:41:26.921] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:41:26.921] DEBUG - Got lock
[11:41:26.921] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:41:26.921] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:41:26.922] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[11:41:26.922] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[11:41:26.922] DEBUG - Not performing validation to message since validator is DISABLED.
[11:41:26.922] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:41:26.922] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:41:26.922] DEBUG - Finished passing message on to parent
[11:41:26.922] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[11:41:26.923] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[11:41:26.923] DEBUG - Receiving message in client.
[11:41:26.923] DEBUG - Message is an answer
[11:41:26.923] DEBUG - Sent now wait for answer
[11:41:41.925] DEBUG - listener having answer!!!!
[11:41:41.925] DEBUG - Normal return from message sent, probably no answer 15079ms
[11:41:41.925] INFO  - Answer received: NULL
[11:41:41.925] INFO  - WAITING 2000ms
[11:41:43.926] INFO  - Scenario executed in 17.18 s
[11:41:43.926] INFO  - Stopping stack
[11:41:43.926] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:41:43.928] DEBUG - In stopping. Going to disconnect all peers in peer table
[11:41:43.928] DEBUG - Handling event with type [STOP_EVENT]
[11:41:43.928] DEBUG - Not performing validation to message since validator is DISABLED.
[11:41:43.928] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[11:41:43.928] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[11:41:43.928] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[11:41:43.928] DEBUG - Send DPR message with Disconnect-Cause [0]
[11:41:43.929] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:41:43.929] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:43.929] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:43.930] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:41:43.930] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[11:41:43.930] DEBUG - Calling stopped() on PeerTableImpl
[11:41:43.930] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[11:41:43.932] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:43.932] DEBUG - No data received ?
[11:41:43.932] DEBUG - Passing message on to parent
[11:41:43.932] DEBUG - Received message of size [84]
[11:41:43.932] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:41:43.932] DEBUG - Got lock
[11:41:43.932] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:41:43.932] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:41:43.932] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[11:41:43.933] DEBUG - Handling event with type [DPA_EVENT]
[11:41:43.933] DEBUG - Not performing validation to message since validator is DISABLED.
[11:41:43.933] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:41:43.933] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:41:43.933] DEBUG - Finished passing message on to parent
[11:41:43.933] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:43.934] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:41:43.934] DEBUG - Got lock
[11:41:43.934] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:41:43.935] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[11:41:43.935] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[11:41:43.935] DEBUG - Handling event with type [DISCONNECT_EVENT]
[11:41:43.935] DEBUG - Not performing validation to message since validator is DISABLED.
[11:41:43.935] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [9999].
[11:41:43.935] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:41:43.935] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:43.937] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[11:41:43.937] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:41:43.937] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[11:41:43.937] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[11:41:43.937] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:41:43.937] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:41:43.937] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:43.937] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:43.938] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:43.938] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52995]]
[11:41:43.938] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:41:43.938] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:41:43.938] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[11:41:43.938] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:41:43.938] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:41:43.939] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[11:41:43.939] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:41:43.939] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:41:43.939] DEBUG - Stopping ... [2] FSM threads are running
[11:41:44.031] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[11:41:44.031] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:41:44.031] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:41:44.031] DEBUG - Stopping ... [1] FSM threads are running
[11:41:44.039] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[11:41:44.039] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:41:44.039] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:41:44.039] DEBUG - Stopping ... [0] FSM threads are running
[11:41:44.180] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[11:41:44.181] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:41:44.181] INFO  - Destroying stack
[11:41:44.181] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[11:41:44.181] DEBUG - Calling destroy on router
[11:43:55.084] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[11:43:55.322] INFO  - Initiating stack
[11:43:55.324] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:43:55.541] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[11:43:55.542] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[11:43:55.542] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[11:43:55.542] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[11:43:55.542] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[11:43:55.573] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[11:43:55.574] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[11:43:55.576] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[11:43:55.576] DEBUG - Going to loop through configured realms and add them into a network map
[11:43:55.576] DEBUG - Getting config for realm [emblacom.com]
[11:43:55.576] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[11:43:55.577] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[11:43:55.586] DEBUG - Initializing Peer Table.
[11:43:55.586] DEBUG - Populating peerTable from configuration
[11:43:55.606] DEBUG - Maximum FSM Queue size is [10000]
[11:43:55.609] DEBUG - Initializing QueueStat @ Thread[main]
[11:43:55.609] DEBUG - Finished Initializing QueueStat @ Thread[main]
[11:43:55.611] DEBUG - Starting FSM Thread 1 of 3
[11:43:55.611] DEBUG - Starting FSM Thread 2 of 3
[11:43:55.611] DEBUG - Starting ... [1] FSM threads are running
[11:43:55.612] DEBUG - Starting FSM Thread 3 of 3
[11:43:55.612] DEBUG - Starting ... [2] FSM threads are running
[11:43:55.613] DEBUG - Starting ... [3] FSM threads are running
[11:43:55.636] DEBUG - Destination address is set to [testblade04] : [3868]
[11:43:55.636] DEBUG - Origin address is set to [0.0.0.0] : [0]
[11:43:55.637] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}] to peer table
[11:43:55.637] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:43:55.638] INFO  - Starting stack
[11:43:55.657] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[11:43:55.658] DEBUG - Handling event with type [START_EVENT]
[11:43:55.658] DEBUG - Not performing validation to message since validator is DISABLED.
[11:43:55.658] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:43:55.658] DEBUG - Calling start on the router
[11:43:55.658] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[11:43:55.659] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[11:43:55.668] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[11:43:55.678] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:43:55.678] DEBUG - Got lock
[11:43:55.678] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:43:55.679] DEBUG - Passing event to listener. Event type is [CONNECTED]
[11:43:55.680] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[11:43:55.680] DEBUG - Handling event with type [CONNECT_EVENT]
[11:43:55.680] DEBUG - Not performing validation to message since validator is DISABLED.
[11:43:55.680] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:43:55.680] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:43:55.680] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:43:55.680] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]
[11:43:55.680] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[11:43:55.681] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[11:43:55.681] DEBUG - Connected to peer aaa://172.16.133.122:3868
[11:43:55.681] DEBUG - Send CER message
[11:43:55.681] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[11:43:55.690] DEBUG - In getCommonApplications appIds size is [0]
[11:43:55.690] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[11:43:55.690] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[11:43:55.691] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:43:55.691] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:55.692] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:55.692] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:43:55.693] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[11:43:55.931] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[11:43:55.931] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:55.959] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:55.959] DEBUG - No data received ?
[11:43:55.959] DEBUG - Passing message on to parent
[11:43:55.959] DEBUG - Received message of size [276]
[11:43:55.959] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:43:55.959] DEBUG - Got lock
[11:43:55.960] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:43:55.960] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:43:55.960] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[11:43:55.961] DEBUG - Handling event with type [CEA_EVENT]
[11:43:55.961] DEBUG - Not performing validation to message since validator is DISABLED.
[11:43:55.961] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:43:55.961] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:43:55.961] DEBUG - Finished passing message on to parent
[11:43:55.961] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[11:43:55.962] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[11:43:55.962] DEBUG - In getCommonApplications appIds size is [1]
[11:43:55.963] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:43:55.963] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[11:43:55.964] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[11:43:55.968] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[11:43:55.971] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[11:43:55.977] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@38a07e00)
[11:43:55.978] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[11:43:55.979] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[11:43:55.982] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[11:43:55.982] INFO  - Parsing: scn/mms/msg/mms.msg
[11:43:56.096] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2573668056; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 11:43:56 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 11:43:56 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[11:43:56.114] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[11:43:56.115] DEBUG - In getSingleApplicationId for application id [4]
[11:43:56.115] DEBUG - Application Ids in this message are:
[11:43:56.115] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:43:56.115] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:43:56.115] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:43:56.116] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[11:43:56.116] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[11:43:56.116] DEBUG - In getSingleApplicationId for application id [4]
[11:43:56.116] DEBUG - Application Ids in this message are:
[11:43:56.116] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:43:56.117] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:43:56.117] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:43:56.117] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[11:43:56.117] DEBUG - Looping through peers in realm [emblacom.com]
[11:43:56.117] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[11:43:56.118] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[11:43:56.118] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}] for name [172.16.133.122]
[11:43:56.118] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[11:43:56.118] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}]] from list [[172.16.133.122]]
[11:43:56.118] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[11:43:56.119] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}] for sending message [MessageImpl{commandCode=272, flags=128}]
[11:43:56.119] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@4d2a9eda}]
[11:43:56.119] DEBUG - Handling event with type [SEND_MSG_EVENT]
[11:43:56.119] DEBUG - Not performing validation to message since validator is DISABLED.
[11:43:56.119] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[11:43:56.120] DEBUG - Message was submitted to be sent, now adding statistics
[11:43:56.120] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[11:43:56.120] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[11:43:56.121] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:43:56.121] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:56.122] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:56.122] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:43:56.183] DEBUG - Just read [744] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:56.183] DEBUG - No data received ?
[11:43:56.183] DEBUG - Passing message on to parent
[11:43:56.184] DEBUG - Received message of size [744]
[11:43:56.184] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:43:56.184] DEBUG - Got lock
[11:43:56.184] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:43:56.184] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:43:56.184] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[11:43:56.184] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[11:43:56.185] DEBUG - Not performing validation to message since validator is DISABLED.
[11:43:56.185] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:43:56.185] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:43:56.185] DEBUG - Finished passing message on to parent
[11:43:56.185] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[11:43:56.186] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[11:43:56.186] DEBUG - Receiving message in client.
[11:43:56.186] DEBUG - Message is an answer
[11:43:56.187] DEBUG - Answer received after 66ms
[11:43:56.192] DEBUG - Received message={
Credit Control Answer(272) f=----
{ Session-Id:172.16.136.152;319;2573668056; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; }CC-Request-Type:4; CC-Request-Number:1; Origin-Host:testblade04.emblacom.com; Origin-Realm:emblacom.com; Service-Information: { MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 11:43:56 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }}Event-Timestamp:Mon Jul 01 11:43:56 EEST 2013; SGSN-Address:/172.16.136.150; Multiple-Services-Credit-Control: { Granted-Service-Unit: { CC-Service-Specific-Units:1; }Result-Code:2001; }Result-Code:2001; }}
[11:43:56.193] INFO  - Answer received: ResultCode=[getValueWithDesc]
[11:43:56.193] INFO  - WAITING 2000ms
[11:43:58.195] INFO  - Scenario executed in 2.23 s
[11:43:58.195] INFO  - Stopping stack
[11:43:58.195] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:43:58.196] DEBUG - In stopping. Going to disconnect all peers in peer table
[11:43:58.197] DEBUG - Handling event with type [STOP_EVENT]
[11:43:58.197] DEBUG - Not performing validation to message since validator is DISABLED.
[11:43:58.197] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[11:43:58.197] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[11:43:58.197] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[11:43:58.197] DEBUG - Send DPR message with Disconnect-Cause [0]
[11:43:58.198] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:43:58.198] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:58.198] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:58.199] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:43:58.199] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[11:43:58.199] DEBUG - Calling stopped() on PeerTableImpl
[11:43:58.199] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[11:43:58.201] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:58.201] DEBUG - No data received ?
[11:43:58.202] DEBUG - Passing message on to parent
[11:43:58.202] DEBUG - Received message of size [84]
[11:43:58.202] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:43:58.202] DEBUG - Got lock
[11:43:58.202] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:43:58.202] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:43:58.202] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[11:43:58.202] DEBUG - Handling event with type [DPA_EVENT]
[11:43:58.202] DEBUG - Not performing validation to message since validator is DISABLED.
[11:43:58.202] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:43:58.203] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:43:58.203] DEBUG - Finished passing message on to parent
[11:43:58.203] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[11:43:58.203] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:58.203] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[11:43:58.203] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:43:58.203] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:58.204] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:43:58.204] DEBUG - Got lock
[11:43:58.204] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:43:58.205] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[11:43:58.205] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[11:43:58.205] DEBUG - Handling event with type [DISCONNECT_EVENT]
[11:43:58.205] DEBUG - Not performing validation to message since validator is DISABLED.
[11:43:58.205] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:43:58.205] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:43:58.205] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:58.206] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:43:58.206] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [STOPPING]
[11:43:58.206] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:43:58.207] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:58.207] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:58.207] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=52999]]
[11:43:58.207] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:43:58.208] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[11:43:58.209] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:43:58.209] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:43:58.209] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[11:43:58.210] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:43:58.210] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:43:58.210] DEBUG - Stopping ... [2] FSM threads are running
[11:43:58.207] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:43:58.210] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[11:43:58.210] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:43:58.211] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:43:58.211] DEBUG - Stopping ... [1] FSM threads are running
[11:43:58.300] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[11:43:58.300] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:43:58.300] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:43:58.301] DEBUG - Stopping ... [0] FSM threads are running
[11:43:58.450] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[11:43:58.452] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:43:58.452] INFO  - Destroying stack
[11:43:58.452] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[11:43:58.452] DEBUG - Calling destroy on router
[11:44:33.205] INFO  - Loading Diameter stack configuration file [conf/config.xml]
[11:44:33.454] INFO  - Initiating stack
[11:44:33.458] INFO  - (-)(-)(-)(-)(-) Starting Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:44:33.707] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in class classloader. Trying thread context class loader.
[11:44:33.708] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying using 'config/' prefix.
[11:44:33.708] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, in thread context class loader. Trying regular file.
[11:44:33.708] DEBUG - Failed to locate dictionary configuration file: dictionary.xml, from regular file. Trying using 'config/' prefix.
[11:44:33.708] WARN  - Failed to initialize and configure Diameter Dictionary since configuration file was not found. Validator is disabled.
[11:44:33.740] DEBUG - Constructor for RouterImpl: Calling loadConfiguration
[11:44:33.740] DEBUG - Loading Router Configuration. Populating Realms, Application IDs, etc
[11:44:33.742] DEBUG - Configured Request Table with size[10240] and clear size[2048].
[11:44:33.743] DEBUG - Going to loop through configured realms and add them into a network map
[11:44:33.743] DEBUG - Getting config for realm [emblacom.com]
[11:44:33.743] DEBUG - Realm [emblacom.com] has application Acct [0] Auth [4] Vendor [10415]
[11:44:33.743] DEBUG - Adding realm [emblacom.com] with hosts [[172.16.133.122]] to network map
[11:44:33.751] DEBUG - Initializing Peer Table.
[11:44:33.752] DEBUG - Populating peerTable from configuration
[11:44:33.772] DEBUG - Maximum FSM Queue size is [10000]
[11:44:33.776] DEBUG - Initializing QueueStat @ Thread[main]
[11:44:33.776] DEBUG - Finished Initializing QueueStat @ Thread[main]
[11:44:33.777] DEBUG - Starting FSM Thread 1 of 3
[11:44:33.778] DEBUG - Starting FSM Thread 2 of 3
[11:44:33.778] DEBUG - Starting ... [1] FSM threads are running
[11:44:33.778] DEBUG - Starting FSM Thread 3 of 3
[11:44:33.779] DEBUG - Starting ... [2] FSM threads are running
[11:44:33.779] DEBUG - Starting ... [3] FSM threads are running
[11:44:33.801] DEBUG - Destination address is set to [testblade04] : [3868]
[11:44:33.802] DEBUG - Origin address is set to [0.0.0.0] : [0]
[11:44:33.802] DEBUG - Appended peer [CPeer{Uri=aaa://172.16.133.122:3868; State=DOWN; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] to peer table
[11:44:33.802] INFO  - (-)(-)(-)(-)(-) Started  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:44:33.803] INFO  - Starting stack
[11:44:33.824] DEBUG - Starting PeerTable. Going to call connect on all peers in the peerTable
[11:44:33.824] DEBUG - Handling event with type [START_EVENT]
[11:44:33.824] DEBUG - Not performing validation to message since validator is DISABLED.
[11:44:33.825] DEBUG - Placing event [Event{name:START_EVENT, key:null, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:44:33.825] DEBUG - Calling start on the router
[11:44:33.825] DEBUG - Got Event [Event{name:START_EVENT, key:null, object:null}] from Queue
[11:44:33.825] DEBUG - Process event [Event{name:START_EVENT, key:null, object:null}]. Peer State is [DOWN]
[11:44:33.834] DEBUG - Initialising TCPTransportClient. Origin address is [0.0.0.0/0.0.0.0:0] and destination address is [testblade04/172.16.133.122:3868]
[11:44:33.844] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:44:33.844] DEBUG - Got lock
[11:44:33.844] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:44:33.844] DEBUG - Passing event to listener. Event type is [CONNECTED]
[11:44:33.845] DEBUG - Connection to aaa://172.16.133.122:3868 is opened
[11:44:33.846] DEBUG - Handling event with type [CONNECT_EVENT]
[11:44:33.846] DEBUG - Not performing validation to message since validator is DISABLED.
[11:44:33.846] DEBUG - Placing event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [10000].
[11:44:33.846] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:44:33.846] DEBUG - Got Event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:44:33.846] DEBUG - Starting transport. Socket is Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]
[11:44:33.846] DEBUG - Process event [Event{name:CONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[11:44:33.847] DEBUG - Connected to peer aaa://172.16.133.122:3868
[11:44:33.847] DEBUG - Sleeping for 250ms before starting transport so that listeners can all be added and ready for messages
[11:44:33.847] DEBUG - Send CER message
[11:44:33.847] DEBUG - Unknown event type: CONNECT_EVENT in state DOWN
[11:44:33.856] DEBUG - In getCommonApplications appIds size is [0]
[11:44:33.856] DEBUG - Stack configuration has apps list size of  [1]. Looping through them
[11:44:33.856] DEBUG - Adding app id vendor [10415] auth [4] acc [0]
[11:44:33.857] DEBUG - Calling connection to send message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:44:33.857] DEBUG - About to send a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:33.858] DEBUG - Sent a byte buffer of size [180] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:33.859] DEBUG - Connection sent message [MessageImpl{commandCode=257, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:44:33.859] DEBUG - aaa://172.16.133.122:3868 FSM switch state: DOWN -> INITIAL
[11:44:34.097] DEBUG - Finished sleeping for 250ms. By now, MutablePeerTableImpl should have added its listener
[11:44:34.097] DEBUG - Transport is started. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:34.125] DEBUG - Just read [276] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:34.125] DEBUG - No data received ?
[11:44:34.125] DEBUG - Passing message on to parent
[11:44:34.125] DEBUG - Received message of size [276]
[11:44:34.125] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:44:34.126] DEBUG - Got lock
[11:44:34.126] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:44:34.126] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:44:34.127] DEBUG - Receive message type [257] to peer [aaa://testblade04:3868]
[11:44:34.127] DEBUG - Handling event with type [CEA_EVENT]
[11:44:34.127] DEBUG - Not performing validation to message since validator is DISABLED.
[11:44:34.127] DEBUG - Placing event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:44:34.127] DEBUG - Got Event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}] from Queue
[11:44:34.128] DEBUG - Process event [Event{name:CEA_EVENT, key:aaa://testblade04:3868, object:MessageImpl{commandCode=257, flags=0}}]. Peer State is [INITIAL]
[11:44:34.128] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:44:34.128] DEBUG - Finished passing message on to parent
[11:44:34.128] DEBUG - In getCommonApplications appIds size is [1]
[11:44:34.129] DEBUG - Checking common applications. Remote applications: [AppId [Vendor-Id:0; Auth-Application-Id:0; Acct-Application-Id:3], AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:19301; Acct-Application-Id:0], AppId [Vendor-Id:193; Auth-Application-Id:0; Acct-Application-Id:19302]]. Local applications: [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:44:34.130] DEBUG - aaa://172.16.133.122:3868 FSM switch state: INITIAL -> OKAY
[11:44:34.130] INFO  - Loading and running scenario [scn\mms\mms01.scn]
[11:44:34.135] INFO  - Loading scneario: scn\mms\mms01.scn SEQUENCE:1
[11:44:34.138] INFO  - Running scenario: scn\mms\mms01.scn SEQUENCE:1
[11:44:34.144] DEBUG - addSession(org.jdiameter.client.impl.SessionImpl@30b04f0b)
[11:44:34.145] INFO  - Sending message: scn/mms/msg/mms.msg SEQUENCE:1
[11:44:34.146] INFO  - Creating and sending message [scn/mms/msg/mms.msg]
[11:44:34.149] INFO  - Creating document via parsefile: scn/mms/msg/mms.msg
[11:44:34.149] INFO  - Parsing: scn/mms/msg/mms.msg
[11:44:34.269] DEBUG - Message to be sent={
Credit Control Request(272) f=R---
{ Session-Id:172.16.136.152;319;2573706218; Auth-Application-Id:4; Destination-Realm:emblacom.com; Origin-Host:172.16.136.152; Origin-Realm:eclipse.xx; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0; }Subscription-Id: { Subscription-Id-Type:0; Subscription-Id-Data:358468890664; }Service-Context-Id:32251@3gpp.org; CC-Request-Type:4; CC-Request-Number:1; Requested-Action:0; SGSN-Address:/172.16.136.150; Event-Timestamp:Mon Jul 01 11:44:34 EEST 2013; Multiple-Services-Indicator:1; Multiple-Services-Credit-Control: { Requested-Service-Unit: { Service-Identifier:1; CC-Service-Specific-Units:1; }}Service-Information: { PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 11:44:34 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }}}}
[11:44:34.280] DEBUG - Send request MessageImpl{commandCode=272, flags=128} [destHost=; destRealm=[101, 109, 98, 108, 97, 99, 111, 109, 46, 99, 111, 109]]
[11:44:34.280] DEBUG - In getSingleApplicationId for application id [4]
[11:44:34.280] DEBUG - Application Ids in this message are:
[11:44:34.280] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:44:34.280] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:44:34.281] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:44:34.281] DEBUG - Getting a peer for message [MessageImpl{commandCode=272, flags=128}]
[11:44:34.281] DEBUG - Looking up peer for request: [MessageImpl{commandCode=272, flags=128}], DestHost=[null], DestRealm=[emblacom.com]
[11:44:34.282] DEBUG - In getSingleApplicationId for application id [4]
[11:44:34.282] DEBUG - Application Ids in this message are:
[11:44:34.282] DEBUG - [AppId [Vendor-Id:0; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:44:34.282] DEBUG - [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]]
[11:44:34.282] DEBUG - Returning [AppId [Vendor-Id:10415; Auth-Application-Id:4; Acct-Application-Id:0]] as the first application id because its the first vendor specific one found
[11:44:34.282] DEBUG - Finding peer by destination host avp [host=null] did not find anything. Now going to try finding one by destination realm [emblacom.com]
[11:44:34.282] DEBUG - Looping through peers in realm [emblacom.com]
[11:44:34.283] DEBUG - In getPeer for peer with FQDN [172.16.133.122]. Going to find a matching entry in peerTable
[11:44:34.283] DEBUG - Found matching peer [aaa://172.16.133.122:3868]. Is connection open ? true.
[11:44:34.283] DEBUG - Checking peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] for name [172.16.133.122]
[11:44:34.283] DEBUG - Found available peer to add to available peer list with uri [aaa://172.16.133.122:3868] with a valid connection
[11:44:34.283] DEBUG - Performing Realm routing. Realm [emblacom.com] has the following peers available [[CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}]] from list [[172.16.133.122]]
[11:44:34.284] DEBUG - Load balancing selected peer with uri [aaa://172.16.133.122:3868]
[11:44:34.284] DEBUG - Selected peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}] for sending message [MessageImpl{commandCode=272, flags=128}]
[11:44:34.284] DEBUG - Calling sendMessage on peer [CPeer{Uri=aaa://172.16.133.122:3868; State=OKAY; Con=org.jdiameter.client.impl.transport.tcp.TCPClientConnection@292321ca}]
[11:44:34.284] DEBUG - Handling event with type [SEND_MSG_EVENT]
[11:44:34.284] DEBUG - Not performing validation to message since validator is DISABLED.
[11:44:34.285] DEBUG - Placing event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] into linked blocking queue with remaining capacity: [10000].
[11:44:34.285] DEBUG - Message was submitted to be sent, now adding statistics
[11:44:34.285] DEBUG - Got Event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}] from Queue
[11:44:34.285] DEBUG - Process event [Event{name:SEND_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=128}}]. Peer State is [OKAY]
[11:44:34.286] DEBUG - Calling connection to send message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:44:34.286] DEBUG - About to send a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:34.288] DEBUG - Sent a byte buffer of size [856] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:34.288] DEBUG - Connection sent message [MessageImpl{commandCode=272, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:44:34.334] DEBUG - Just read [744] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:34.335] DEBUG - No data received ?
[11:44:34.335] DEBUG - Passing message on to parent
[11:44:34.335] DEBUG - Received message of size [744]
[11:44:34.335] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:44:34.335] DEBUG - Got lock
[11:44:34.335] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:44:34.335] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:44:34.336] DEBUG - Receive message type [272] to peer [aaa://testblade04:3868]
[11:44:34.336] DEBUG - Handling event with type [RECEIVE_MSG_EVENT]
[11:44:34.336] DEBUG - Not performing validation to message since validator is DISABLED.
[11:44:34.336] DEBUG - Placing event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:44:34.336] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:44:34.336] DEBUG - Finished passing message on to parent
[11:44:34.337] DEBUG - Got Event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}] from Queue
[11:44:34.337] DEBUG - Process event [Event{name:RECEIVE_MSG_EVENT, key:null, object:MessageImpl{commandCode=272, flags=0}}]. Peer State is [OKAY]
[11:44:34.337] DEBUG - Receiving message in client.
[11:44:34.337] DEBUG - Message is an answer
[11:44:34.339] DEBUG - Answer received after 53ms
[11:44:34.348] DEBUG - Received message={
Credit Control Answer(272) f=----
{ Session-Id:172.16.136.152;319;2573706218; Vendor-Specific-Application-Id: { Vendor-Id:10415; Auth-Application-Id:4; }CC-Request-Type:4; CC-Request-Number:1; Origin-Host:testblade04.emblacom.com; Origin-Realm:emblacom.com; Service-Information: { MMS-Information: { Originator-Address: { Address-Type:1; Address-Data:722310212985080; }Recipient-Address: { Address-Type:1; Address-Data:358468890665; Address-Domain: { Domain-Name:emblacom.com; G3PP-IMSI-MCC-MNC:722310; }}Message-Size:59073; Submission-Time:Mon Jul 01 11:44:34 EEST 2013; MM-Content-Type: { Type-Number:application/vnd.wap.multipart.*; Content-Size:0; Additional-Content-Information: { Type-Number:text/*; Content-Size:4; }Additional-Content-Information: { Type-Number:image/*; Content-Size:58683; }}Message-Type:1; Delivery-Report-Requested:0; Read-Reply-Report-Requested:0; }PS-Information: { G3PP-MS-TimeZone:00000015; G3PP-SGSN-MCC-MNC:722310; }}Event-Timestamp:Mon Jul 01 11:44:34 EEST 2013; SGSN-Address:/172.16.136.150; Multiple-Services-Credit-Control: { Granted-Service-Unit: { CC-Service-Specific-Units:1; }Result-Code:2001; }Result-Code:2001; }}
[11:44:34.349] INFO  - Answer received: ResultCode=[getValueWithDesc]
[11:44:34.349] INFO  - WAITING 2000ms
[11:44:36.351] INFO  - Scenario executed in 2.22 s
[11:44:36.352] INFO  - Stopping stack
[11:44:36.352] INFO  - (-)(-)(-)(-)(-) Stopping Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:44:36.356] DEBUG - In stopping. Going to disconnect all peers in peer table
[11:44:36.356] DEBUG - Handling event with type [STOP_EVENT]
[11:44:36.356] DEBUG - Not performing validation to message since validator is DISABLED.
[11:44:36.356] DEBUG - Placing event [Event{name:STOP_EVENT, key:null, object:0}] into linked blocking queue with remaining capacity: [10000].
[11:44:36.356] DEBUG - Got Event [Event{name:STOP_EVENT, key:null, object:0}] from Queue
[11:44:36.356] DEBUG - Process event [Event{name:STOP_EVENT, key:null, object:0}]. Peer State is [OKAY]
[11:44:36.357] DEBUG - Send DPR message with Disconnect-Cause [0]
[11:44:36.357] DEBUG - Calling connection to send message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:44:36.357] DEBUG - About to send a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:36.358] DEBUG - Sent a byte buffer of size [76] over the TCP nio socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:36.358] DEBUG - Connection sent message [MessageImpl{commandCode=282, flags=128}] to peer [aaa://172.16.133.122:3868] over the network
[11:44:36.358] DEBUG - Calling stopped() on PeerTableImpl
[11:44:36.359] DEBUG - Stopping thread group and waiting a max of 2000ms for all threads to finish
[11:44:36.359] DEBUG - aaa://172.16.133.122:3868 FSM switch state: OKAY -> STOPPING
[11:44:36.359] DEBUG - Just read [84] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:36.360] DEBUG - No data received ?
[11:44:36.360] DEBUG - Passing message on to parent
[11:44:36.360] DEBUG - Received message of size [84]
[11:44:36.360] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:44:36.360] DEBUG - Got lock
[11:44:36.360] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:44:36.360] DEBUG - Passing event to listener. Event type is [MESSAGE_RECEIVED]
[11:44:36.360] DEBUG - Receive message type [282] to peer [aaa://testblade04:3868]
[11:44:36.360] DEBUG - Handling event with type [DPA_EVENT]
[11:44:36.361] DEBUG - Not performing validation to message since validator is DISABLED.
[11:44:36.361] DEBUG - Placing event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] into linked blocking queue with remaining capacity: [10000].
[11:44:36.361] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:44:36.361] DEBUG - Finished passing message on to parent
[11:44:36.361] DEBUG - Just read [-1] bytes on [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:36.362] DEBUG - In onEvent for connection [aaa://testblade04:3868]. Getting lock
[11:44:36.362] DEBUG - Got lock
[11:44:36.362] DEBUG - processBufferedMessages is returning true on connection [aaa://testblade04:3868] as there are listeners
[11:44:36.362] DEBUG - Passing event to listener. Event type is [DISCONNECTED]
[11:44:36.363] DEBUG - Connection from aaa://172.16.133.122:3868 is closed
[11:44:36.363] DEBUG - Handling event with type [DISCONNECT_EVENT]
[11:44:36.363] DEBUG - Not performing validation to message since validator is DISABLED.
[11:44:36.363] DEBUG - Placing event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] into linked blocking queue with remaining capacity: [9999].
[11:44:36.363] DEBUG - Releasing lock and finished onEvent for connection [aaa://testblade04:3868]
[11:44:36.363] INFO  - Read thread is stopped for socket [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:36.364] DEBUG - Got Event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}] from Queue
[11:44:36.364] DEBUG - Process event [Event{name:DPA_EVENT, key:null, object:MessageImpl{commandCode=282, flags=0}}]. Peer State is [STOPPING]
[11:44:36.364] DEBUG - In disconnect for [aaa://testblade04:3868]
[11:44:36.364] DEBUG - Stopping transport. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:36.365] DEBUG - Transport is stopped. Socket is [Socket[addr=testblade04/172.16.133.122,port=3868,localport=53003]]
[11:44:36.365] DEBUG - Disconnected from peer aaa://172.16.133.122:3868
[11:44:36.365] DEBUG - aaa://172.16.133.122:3868 FSM switch state: STOPPING -> DOWN
[11:44:36.365] DEBUG - Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:44:36.365] DEBUG - Finished Setting mustRun to false @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:44:36.366] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_3-2 is exiting
[11:44:36.366] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:44:36.366] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_3-2]
[11:44:36.366] DEBUG - Stopping ... [2] FSM threads are running
[11:44:36.366] DEBUG - Got Event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}] from Queue
[11:44:36.367] DEBUG - Process event [Event{name:DISCONNECT_EVENT, key:aaa://testblade04:3868, object:null}]. Peer State is [DOWN]
[11:44:36.367] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_1-0 is exiting
[11:44:36.367] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:44:36.367] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_1-0]
[11:44:36.367] DEBUG - Stopping ... [1] FSM threads are running
[11:44:36.460] DEBUG - FSM Thread FSM-aaa://172.16.133.122:3868_2-1 is exiting
[11:44:36.460] DEBUG - Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:44:36.460] DEBUG - Done Setting QueueStat to null @ Thread [FSM-aaa://172.16.133.122:3868_2-1]
[11:44:36.460] DEBUG - Stopping ... [0] FSM threads are running
[11:44:36.609] DEBUG - Waited 250ms. Time remaining to wait: 1750ms. 0 Thread still active.
[11:44:36.610] INFO  - (-)(-)(-)(-)(-) Stopped  Mobicents DIAMETER Stack v1.5.10.0-build639 (-)(-)(-)(-)(-)
[11:44:36.610] INFO  - Destroying stack
[11:44:36.610] DEBUG - In destroy. Going to destroy concurrentFactory's thread group
[11:44:36.610] DEBUG - Calling destroy on router
